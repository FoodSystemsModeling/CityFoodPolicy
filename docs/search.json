[
  {
    "objectID": "index.html",
    "href": "index.html",
    "title": "CityFoodPolicy",
    "section": "",
    "text": "Introduction",
    "crumbs": [
      "Introduction"
    ]
  },
  {
    "objectID": "index.html#a-global-trend-cities-committed-to-values-based-food-policy",
    "href": "index.html#a-global-trend-cities-committed-to-values-based-food-policy",
    "title": "CityFoodPolicy",
    "section": "A Global trend: Cities committed to values-based food policy",
    "text": "A Global trend: Cities committed to values-based food policy\nThe policies that inform how cities purchase food provide critical opportunities to drive regional resilience and positively impact a region’s economic and environmental goals. To be effective, food policy plans require consideration of local conditions. What works for one city may not work for another. Production systems associated with generating positive environmental impacts are not automatically transferable to other locations; their impacts may vary depending on numerous factors, ranging from microclimates and soil types to transportation and distribution-related infrastructure.\nAs regions across the world leverage public food procurement to meet a combination of climate, health, community development, and economic goals, these policies and programs need to be aware of the trade-offs and co-benefits their policies and programs will create. Having more robust data about the economic, environmental, and social-cultural tradeoffs of the program can help bolster support to implement good food policies.\nThe City Food Policy Project brings together researchers, policy practitioners, and food systems stakeholders to:\n\nUnderstand the impacts, or potential tradeoffs, associated with city food policies\nDevelop policy instruments that inform how cities weigh and implement values-based food policies\n\nThis book contains information and links to all of the data used in this project as well as all project outputs. The goal is to create a framework for our research to be reproducible and to be used to conduct similar research in other cities across the world.\nOn the left hand side is an outline of the book, you can click on a chapters to navigate to that section of the book. If you click on Dry beans, Beef, or Greens, you will see a list of all of the sub chapters for each commodity. On the right hand side is a more detailed table of contents for the section of the book where you are and can be used to navigate within a chapter. Hyperlinks are included throughout the book to take you to a GitHub site where we house all of the data, links to external websites with additional information, and links to other sections of this book.",
    "crumbs": [
      "Introduction"
    ]
  },
  {
    "objectID": "index.html#license",
    "href": "index.html#license",
    "title": "CityFoodPolicy",
    "section": "License",
    "text": "License\nThis website is (and will always be) free to use, and is licensed under the Creative Commons Attribution 4.0 International License.",
    "crumbs": [
      "Introduction"
    ]
  },
  {
    "objectID": "index.html#thank-you-to-our-funders-and-partners",
    "href": "index.html#thank-you-to-our-funders-and-partners",
    "title": "CityFoodPolicy",
    "section": "Thank you to our funders and partners",
    "text": "Thank you to our funders and partners",
    "crumbs": [
      "Introduction"
    ]
  },
  {
    "objectID": "cityfoodpolicies.html",
    "href": "cityfoodpolicies.html",
    "title": "Values-based public food procurement",
    "section": "",
    "text": "International public food procurement\nComing soon…",
    "crumbs": [
      "Values-based public food procurement"
    ]
  },
  {
    "objectID": "cityfoodpolicies.html#new-york-city-public-food-procurment",
    "href": "cityfoodpolicies.html#new-york-city-public-food-procurment",
    "title": "Values-based public food procurement",
    "section": "New York City public food procurment",
    "text": "New York City public food procurment\nAuthors: Aiden Irish and Tia Schwab  Reviewers: Michael Hurwitz, Milagros de Hoz, Becca Jablonski  Date: October 15, 2024  Acknowledgements: Thank you to everyone whose input informed the research and development of this report, including Mark Izeman, Natural Resources Defense Council, as well as everyone involved in food procurement on behalf of the City of New York who contributed their expertise to this document.  Funding: This work was supported by the Foundation for Food and Agriculture Research, the Rockefeller Foundation, the Colorado State University Office of Vice President for Research, the NYS Agricultural Experiment Station, and the NY Farm Viability Institute.\n\nIntroduction\nFood purchasing and consumption choices play a central role not only in the individual health of people, but also the economic, social, and environmental wellbeing of society. Beyond nutrition’s role in public health, food impacts the environment through its production, processing, and transportation, all of which significantly contribute to greenhouse gas emissions, soil, water, and air quality. Additionally, over 10 percent of U.S. employment is in food and agriculture sectors, and labor practices in these industries play important roles in the economic well-being of people and communities that rely on those jobs. Because food impacts so many aspects of our lives, cities around the world are beginning to leverage their public food procurement dollars to influence food system transformation. Among these cities, New York City (NYC) has a large share of municipal food procurement, spending about $500 million per year on food and meals for public agencies, including schools, correctional facilities, hospitals, older adult centers, pantries, shelters, and more.\nDue to the scale of NYC’s food procurement and the potential public value of food systems change, NYC is developing plans for values-based procurement policies that will help the city to leverage its food spending towards a variety of public goals. In 2018, NYC worked with the Center for Good Food Purchasing to conduct a baseline assessment of public procurement and set a path forward for agencies to adopt the GFP framework, while adapting it to the NYC reality. Later, in 2021, NYC MOFP released Food Forward NYC, the city’s first ever 10-year food policy plan. The plan includes the goal of using food purchasing to advance values including transparency, local economies, environmental sustainability, valued workforce, animal welfare, and nutrition. Finally, in 2022, through an executive order, NYC institutionalized these efforts, as a way to foster vendor and agency cooperation in improving health and nutrition through public food procurement and the NYC food standards.\nUsing public spending to advance broader public goals beyond the direct intent of the expenditure is not a new practice. In recent decades, practices such as divestment from fossil fuel companies have grown in popularity as a way to meet the direct needs of the purchasing entity but also the needs of the broader public. Values-based food procurement, however, represents a significant advancement in the use and impact of such procurement mechanisms for advancing social change. Public food procurement is governed by critical federal, state, and local laws that guide – and sometimes limit – how public dollars can be spent. These policies, guidelines, and regulations are meant to ensure that public dollars are spent responsibly and in ways that limit graft and corruption. Barring any legislative changes, effective values-based food procurement policies must be enacted within the legal framework of existing laws and policies.\nStarting in 2023, NYC partnered with researchers at Colorado State University (CSU) and Cornell University on the City Food Policy Project (CFP Project) to empirically model the impacts of potential values-based procurement policies. The project aims to model a select number of values-based procurement policies and their potential, social, environmental, and economic implications for both NYC and New York State.\nThis report aims to enumerate the legal and political setting of the CFP Project in three sections. First, we summarize the proposed values-based procurement policies that are under consideration by NYC and the process by which these policies were selected. Second, we review key federal, New York State, and New York City laws and policies that influence municipal food procurement. Finally, we review each values-based procurement policy under consideration and specific laws and policies that guide their implementation. This report is an enumeration of relevant laws and policies and not an analysis of those laws. Moreover, this report does not represent the formal or legal opinion of the City of New York.\n\n\nValues-based food procurement & policies\n\nGuiding values\nCities have begun to leverage their part of this spending to advance impacts both for their residents and their regions. The values guiding NYC’s food procurement policies are as follows.\n\nAnimal welfare. NYC aims to use public food dollars to minimize harm to animals raised for food.\nEnvironmental sustainability. NYC aims to use public food dollars to support a healthy and sustainable natural environment.\nLocal economies. NYC aims to use public food dollars to support New York State businesses, particularly those that are owned by women and minorities.\nNutrition. NYC aims to use its public food dollars on nutritionally dense foods like minimally processed vegetables, fruits, and whole grains.\nTransparency. NYC aims to provide transparency in what food it is buying, where this food is coming from, and who provides this food.\nValued workforce. NYC aims to use its public food dollars to support businesses and supply chains that support the wellbeing of the workers and employees.\n\n\n\nPolicy actions\nIn support of these values, NYC – in collaboration with research partners at CSU and Cornell – identified six procurement policies for the research team to investigate. These policy actions were selected that could be administratively or legally feasible for NYC, align with existing Mayoral priorities, and have the potential of advancing the values outlined previously. These actions are summarized in the New York City food policy actions section below.\nThe following sections begin by reviewing relevant laws/policies at the Federal, state, and city levels that are either generally applicable across all proposed policy actions and/or specific to a given policy action. Table 1 summarizes all laws/policies reviewed in this document and associated policy actions that may be impacted by each.\nTable 1. Laws/policies reviewed in this document and associated policy actions\n\n\nGeneral enabling and constraining legislation\nThe following highlights federal, state, and city legislation or policies that enable or constrain NYC values-based procurement initiative as a whole, regardless of the specific policy action. These generally applicable laws/policies are enumerated before reviewing laws/policies specific to each proposed values-based procurement policy action.\n\nFederal level legal considerations\n\nCode of Federal Regulations (CFR): When procuring goods and services under a Federal award, a State and any sub-award recipient must follow federal policies and procedures in §200.318 through §200.327, which outline general procurement standards including methods of procurement and guidelines for contracting with small and minority businesses.\nFederal Acquisition Regulations: The Federal Acquisition Regulation (FAR), which consists of Parts 1-53 of Title 48 of the CFR covers contractor qualifications, types of contracts, small and minority business programs, and definitions of procurement words and terms. The FAR guidelines apply to all federal procurements and sub-award recipients.\n\n\n\nState level legal considerations\n\nGeneral Municipal Law §100-A: The policy of the state is “to assure the prudent and economical use of public moneys for the benefit of all the inhabitants of the state and to facilitate the acquisition of facilities and commodities of maximum quality at the lowest possible cost.”\nGeneral Municipal Law §103: GML §103 outlines the rules of advertising for bids and offers. Under GML, purchase contracts must be awarded to the lowest responsible bidder OR on the basis of best value, as defined by State Finance Law.\nGeneral Municipal Law §104-B: GML §104-B directs the governing board of every political subdivision and any district therein, by resolution, to “adopt internal policies and procedures governing all procurements of goods and services which are not required to be made pursuant to the competitive bidding requirements of GML § 103 or of any other general, special or local law. In cities with a population of one million or more, the procurement policy board shall develop and promulgate such policies and procedures by rule.” In New York City, therefore, the procurement policy board is charged with creating specific procurement regulations.\nState Finance Law §163: State Finance Law §163 defines best value as “the basis for awarding contracts for services to the offeror which optimizes quality, cost and efficiency, among responsive and responsible offerors. Such basis shall reflect, wherever possible, objective and quantifiable analysis. Such basis may also identify a quantitative factor for offerors that are small businesses, certified minority- or women-owned business enterprises as defined in subdivisions one, seven, fifteen and twenty of Executive Law § 310 (Definitions) or service-disabled veteran-owned business enterprises as defined in subdivision one of section forty of the veterans’ services law to be used in evaluation of offers for awarding of contracts for services.”\nGood Food New York Bill: Senate Bill S6955A, awaiting governor signature, would allow food contracts to be awarded “to a qualified bidder who fulfills certain values based procurement standards when such bid is not more than 10% higher than the lowest responsible bidder and when the bidder makes publicly available data on where such bidder sources their food items; sets forth the criteria for values based procurement standards to include local economies, environmental sustainability, racial equity, valued workforce, animal welfare, and nutrition.”\n\n\n\n\n\nKey laws & definitions for individual policy actions\nThe following section summarizes relevant laws/policies specific to each proposed policy action, excluding those already summarized in the previous section. Where relevant, the following sections identify and define key terms relevant to the policy action. These definitions are noted as sub-bullets under the policy/law wherein they are defined/described. Relevant laws/policies under each policy action are organized starting from the Federal level and concluding with local.\n\nCertified organic incentives\n\nOrganic Foods Production Act (OFPA), 7 U.S.C. §§ 6501–6522: The OFPA “authorized the U.S. Secretary of Agriculture to establish regulations, administered by the Agricultural Marketing Service (AMS) within the U.S. Department of Agriculture (USDA), for certifying products as organic under the National Organic Program (NOP).”\n\nOrganic: “Organic” products are those certified as such under the U.S. Department of Agriculture’s National Organics Program. See certification requirements at: USDA Organic | USDA\n\n\n\n\nNew York State grown and/or processed incentives\n\nFederal Procurement Law: Public agencies and programs that use federal funds are not permitted to prefer locally produced products. However, there are specific exceptions for USDA-administered programs that explicitly encourage local purchasing, including the National School Lunch Act, the Child Nutrition Act, and the Child and Adult Care Food Program (“CACFP”).\nNYS Executive Order 32 of 2023: New York State EO32 of 2023 established state agency food purchasing goals for NYS agricultural products. It includes the following definitions.\n\nNYS Food Products: “Agricultural products and food items that are grown, harvested, produced, or processed in the State of New York. Processed food items that are composed of raw materials from both inside and outside the State may be deemed New York State Food Products when (i) their predominant value or quantity is derived from food grown, harvested, or produced in New York State and (ii) the processing of such food products takes place in facilities that are located in New York State.”\nAgricultural products and food items: “All articles of food or drink, intended for human consumption that may be purchased using any funding stream managed by any State Agency, including any federally funded programs.”\n\nNew York State Grown and Certified Program: Agricultural products must be grown and produced in New York State, from farms that participate in third-party food safety verification programs (if applicable to the specific product), and from producers that participate in an environmental management program. Processed food/beverage products must contain 51% or more of ingredients from products grown, raised, or produced on farms certified under New York State Grown and Certified. The specific criteria for each product can be found at: Get Certified | New York State Grown & Certified (ny.gov).\nGeneral Municipal Law §103(8a): This general municipal law subsection allows city contracting agencies “to require provisions that mandate that the essential components of such food products are grown, produced or harvested in New York state, or that any processing of such food products take place in facilities located within New York state.”\nLocal Law 50 of 2011: This law requires the Mayor’s Office of Contract Services to establish guidelines for city agencies to increase the purchase of New York State food products through public food contracts. It includes the following definition.\n\nNew York State food products: “Food products whose essential components are grown, produced or harvested in New York state, and processed food that is processed in facilities located within New York state.”\n\nRegional Local Economies: Per the Center for Good Food Purchasing Program Standards, food supporting regional local economies is food purchased from small scale and family or cooperatively-owned farms (per the USDA definition of farm size in the most recent USDA Census of Agriculture) AND located within 250 miles (or 500 miles for meat) of New York City.\n\nFamily Farm: As defined by the USDA, a majority of the business is owned by the operator and individuals related to the operator.\n\n\n\n\nCommunity hiring incentives enabling legislation\n\nSenate Bill S7387B: New York State legislation authorized the Office of Community Hiring (OCH) to establish certain rules to preference bidders who employ economically disadvantaged individuals. The Community Hiring Rules will go through the formal rulemaking process under the City Administrative Procedure Act (CAPA), which includes, among other things, notice and opportunity for public comment. The NYC Office of Community Hiring has not yet published rules governing this legislation.\n\nEconomically Disadvantaged Individual: an individual “(1) whose income or household income falls below an applicable quantitative threshold determined by the director, provided that such income shall not include any types of public benefits provided by the federal government or a state or local government and identified by the director; and (2) who is certified as meeting all applicable requirements.” While the rules are not final, this will likely mean following within 300% of the federal poverty level. This will only apply to service contracts, not goods.\n\nCode of Federal Regulations Title 13 part 121: Outlines federal small business administration standards. See Definition of “small business,” below.\nState Executive Law §28 (State Declaration of Disaster Emergency): See small business definition below.\nState Finance Law §163 (see Section 3.0): Under State Finance Law, municipalities can apply a quantitative factor for small businesses using the definition outlined below.\n\nSmall Business: “A business which has a significant business presence in the state, is independently owned and operated, not dominant in its field and employs, based on its industry, a certain number of persons as determined by the director, but not to exceed three hundred, except during a declared state disaster emergency as defined pursuant to State Executive Law §28 (State Declaration of Disaster Emergency), not to exceed three hundred employees who work thirty or more hours per week over the period of fifty-two weeks for a total of one thousand five hundred sixty hours worked, taking into consideration factors which include, but are not limited to, Federal Small Business Administration standards pursuant to 13 CFR part 121 and any amendments thereto. The director may issue regulations on the construction of the terms in this definition. For purposes of this subdivision, an employee may break from employment for up to thirteen weeks without the fifty-two week lookback period resetting.”\nNote: For the purpose of the CFPP, the modeling team will identify criteria for “small business” that makes sense in the context of the three food products.\n\n\n\n\nMinority and women-owned business enterprise (M/WBE) incentives\n\nNew York City Minority and Women-Owned Business Enterprises (M/WBE) Program: This program expands opportunities for minority and women entrepreneurs to access government contracts and grow their businesses. When eligible businesses are certified with the City, they become more visible to prospective buyers, including City agencies and private contractors seeking to purchase goods and services. In order to become certified, businesses must meet the criteria outlined in the program pertaining to the business ownership, location, legal status and structure, and operation history.\nLocal Law 1 of 2013 This law established specific goals for M/WBE participation in NYC contracts based on industry and M/WBE categories.\nM/WBE Price Preference Rule: Under NYC procurement policy board rules, “if an award will be made based on best value, a vendor that is an M/WBE or State-certified M/WBE must, except with the approval of the chief contracting procurement officer, be given a price preference of 10% and will be evaluated as if the bid price were 10% lower.”\nM/WBE Procurement & Contract Method: This process rule by the City of New York allows agencies to contract directly with a M/WBE instead of going through formal competitive procurement method on contracts up to $1.5 million.\n\n\n\nPublic investments in middle food supply chain infrastructure\n\nResilient Food Systems Infrastructure Program. This State-level program, supported by U.S. Department of Agriculture funding, provides grant support for the development of aggregation, processing, manufacturing, storage, transport, wholesaling, or distribution of food products. More information available at https://agriculture.ny.gov/resilient-food-systems-infrastructure-program.\nThis analysis did not identify laws/policies providing definitional guidance. The following definitions are offered by the project team.\n\nMiddle Food Supply Chain Infrastructure – Middle Food Supply Chain Infrastructure refers to the aggregation, processing, and/or distribution infrastructure necessary to move agricultural products to their final market destination and/or to process raw agricultural products into a form usable by the end market destination. These may include, but are not limited to infrastructure such as cold storage facilities for produce aggregation and distribution, processing facilities for beef, cooking/processing facilities needed to create processed food products, etc.\nInfrastructure Investments – This refers to the manner by which the City or State of New York will financially support the development of middle infrastructure both within City Limits and in the rest of New York State. Modes of investment may include providing grants, loans, other financial support or technical assistance to entities seeking to develop critical infrastructure.\n\n\n\n\nMenu requirements changes\n\nUSDA Nutrition Standards for School Meals: NYC Department of Education Office of Food and Nutrition Services meals must also meet the USDA nutrition standards set forth in 7 CFR Parts 210 and 220 in addition to the NYC Food Standards (see below).\nThe Child and Adult Care Food Program (CACFP): CACFP “is a federal program that provides reimbursements for nutritious meals and snacks to eligible children and adults who are enrolled for care at participating child-care centers, day care homes, and adult day care centers.” Meal and snack programs at NYC Aging, NYC Department of Homeless Services, and NYC Department of Community and Youth Development must meet requirements of the CACFP program in addition to the NYC Food Standards.\nNew York City Food Standards: The NYC Food Standards outline requirements for food purchased and meals and snacks served by City agencies and their contractors, with the goal of improving the health of all New Yorkers. They minimize processed and red meat, added sugars, and saturated fat, and set minimum requirements for fruits, vegetables, whole-grains, and plant-based proteins. Under the current standards, each agency must provide one serving (defined by the item appearing on the menu) of plant-based entrees per week per meal type. These standards include the following definitions.\n\nMinimally Processed Plant-Based Proteins: “Any item with an unprocessed plant-based protein or flour made from unprocessed plant-protein listed as the first or second ingredient on the Nutrition Facts label and that does not contain high-fructose corn syrup, hydrogenated oils or hydrolyzed proteins.\nPlant-Based Entrees: “An entree that includes a whole or minimally processed plant-based protein item such as beans, chickpeas, lentils, edamame, tofu, nuts and seeds as the primary protein component.”\n\n\n\n\n\nKey considerations\nThis summary outlines legal and policy factors influencing the implementation of current and potential values-based procurement policies by the City of New York. In this final section, we outline two key lingering questions: definitions around community hiring and whether the Governor will sign the NYS Good Food Purchasing legislation.\nCurrently, two features – hiring economically disadvantaged individuals and supporting small businesses – are critical to the enactment of the proposed community hiring policy. State law does provide clarification of what constitutes an economically disadvantaged individual. Furthermore, federal and state law provide guidance on what constitutes a small business according to the Federal Small Business Administration and the State finance law. However, both core concepts require further clarification in order to effectively develop policies that advance these areas in values-based procurement.\nRules governing community hiring that employ the State-definition of economically disadvantaged individual must still go through a formal rule-making process outlined by the City Administrative Procedures Act (CAPA). This rule-making process will be essential to establishing actionable criteria and processes needed for implementation. Additionally, the public comment process may result in legal/political challenges to the proposed rules that may necessitate further revision to the definition, criteria, and processes. Similarly, while the Federal Small Business Administration and State finance law provide definitions of small business, these definitions are intended for business support programs and taxation and the definitions of small business may not be relevant to food procurement decision making. For example, the maximum of 300 employees noted in the State definition of small business is likely too high to provide useful guidance to procurement decisions seeking to support relevant small- and mid-scale farms. Industry-specific guidance on what constitutes a small business will be needed. In addition to these definitional clarifications under the community hiring policy proposal, further clarification is also needed regarding how these characteristics – community hiring and small business – will be weighed/considered when scoring product/service bids and proposals.\nFinally, a notable piece of New York State policy that could impact implementation of NYC values-based procurement programs is the New York State Good Food Purchasing legislation that is pending delivery to, and final approval by Governor Hochul as of this writing (See State level legal considerations)",
    "crumbs": [
      "Values-based public food procurement"
    ]
  },
  {
    "objectID": "cityfoodpolicies.html#sec-nyc-food-policy-actions",
    "href": "cityfoodpolicies.html#sec-nyc-food-policy-actions",
    "title": "Values-based public food procurement",
    "section": "New York City food policy actions",
    "text": "New York City food policy actions\nIn 2022, New York City formally established the Good Food Purchasing initiative, which guides City agencies in aligning food spending with six core values: nutrition, local economies, environmental sustainability, animal welfare, valued workforce, and transparency. These values shape how agencies design procurements, how vendors and supply chain stakeholders develop and price products, and how bids are evaluated and selected. The Food Policy Actions featured in this dashboard were identified in partnership with the Mayor’s Office of Food Policy. The first part of each Food Policy Action name reflects its Good Food Purchasing value alignment, while the second describes how New York City is advancing (or considering advancing) progress toward that value.\n\nBusiness As Usual\nBusiness as Usual represents our best estimate of current NYC purchasing practices for the selected commodities. It reflects what NYC agencies purchase, where those products come from, and how they move through the supply chain—from producers to City buyers. Under Business as Usual, vendors submit bids in response to NYC procurement requests, and agencies generally select the lowest-priced bid that meets their requirements. This scenario is built using multiple data sources, existing models, and input and validation from NYC and affected supply chain stakeholders. It serves as a baseline for comparing how alternative food policy actions may change outcomes.\n\n\nEnvironmental Sustainability: Organic Purchasing\nBid allowance or requirement for organic certification by the producer, as defined by the U.S. Department of Agriculture’s National Organic Program.\n\n\nLocal Economies: M/WBE Purchasing\nBid allowance or requirement for purchasing from certified minority or women owned businesses as defined by New York City or New York State.\n\n\nLocal Economies: Local Purchasing\nA bid allowance or requirement that products be grown, aggregated, processed, and/or distributed in New York State. Which stages of the supply chain must occur in New York State depends on the selected definition. Under this food policy action, local can be defined in five ways:  Producer: Only the producer that grew or raised the commodity must be located in the state of New York  Partial-supply chain: At least one of the producer, aggregator, primary or secondary processor must be located in the state of New York  Entire supply chain: Every supply chain stakeholder must be located in the state of New York  51% NY ingredients + processor in NY: This definition applies to processed products only. Under this definition, the processed product must include a processor from New York State and at least 51% of the raw ingredients must come from NYS producers.  51% NY ingredients + processor located anywhere This definition applies to processed products only. Under this definition, the processed product can be aggregated, processed, and distributed from anywhere, but at least 51% of the raw ingredients must come from NYS producers.\n\n\nLocal Economies: Community Hiring from Small Producers\nBid allowance or requirement for products grown or raised by small- or medium-sized farms. Farm size is measured by annual gross cash farm income (GCFI)—a measure of the farm’s revenue (before deducting expenses) that includes sales of crops and livestock, payments made under agricultural federal programs, and other farm-related cash income including fees from production contracts. The U.S. Department of Agriculture’s Economic Research Service Farm Typology defines small- and mid-sized farms as those with less that $1,000,000 in GCFI. Small- and medium-sized farms were selected as a proxy for “community hiring” as, on average, these operations have lower total household income.\n\n\nLocal Economies: Investment in Middle Supply Chain Infrastructure\nAn investment in a New York State aggregator, primary or secondary processor that expands the availability of New York-grown or -raised products and/or increases access to further processed items.\n\n\nNutrition: Menu Changes\nA change in the number of meals per week that are plant-based. This decision changes the relative share of animal-based proteins and plant-based proteins purchased by NYC agencies.",
    "crumbs": [
      "Values-based public food procurement"
    ]
  },
  {
    "objectID": "research_question.html",
    "href": "research_question.html",
    "title": "Research question",
    "section": "",
    "text": "How did we choose our focal food policy actions?\nWhat are the regional economic and environmental impacts and tradeoffs associated with New York City’s public food procurement policies?\nComing soon…",
    "crumbs": [
      "Research question"
    ]
  },
  {
    "objectID": "research_question.html#how-did-we-choose-our-commodities",
    "href": "research_question.html#how-did-we-choose-our-commodities",
    "title": "Research question",
    "section": "How did we choose our commodities?",
    "text": "How did we choose our commodities?\nIn selecting our focus commodities and their supply chains, our goal was to choose items that are purchased in substantial quantities by NYC, are grown or raised by New York State farmers, and are not already being sourced locally in substantial amounts. The decision to focus on (1) salad bar greens & cabbage, (2) edible beans, and (3) beef (cull dairy) was guided by data (see the GitHub site for details) and made jointly by the City Food Policy team and the NYC Mayor’s Office of Food Policy staff.\n\nNew York City purchasing (demand)\n\nGood Food Purchasing\nThe Good Food Purchasing (GFP) Program provides a transparent, flexible, and metrics-based, framework that encourages large institutions to direct their food buying power toward five core values: local economies, environmental sustainability, valued workforce, animal welfare, and nutrition. The program is managed by the Center for Good Food Purchasing, an organization which works with partner institutions to incorporate the values into their spending, collect data, and track progress.\nOver the past five years, NYC has worked with the Center for Good Food Purchasing to develop an approach to integrating the principles of GFP across our own agency food spending.\n\n\nPolicy\nIn 2017, MOFP started working with City agencies to onboard them into the Good Food Purchasing program. We started with Health and Hospitals and then the DOE, which is by far the largest food buyer, making up almost half of our $300M annual food spend. Later we added ACS, DHS, DOC, and NYC Aging. We started collecting data from the agencies and their vendors about where their food dollars were going, and we collaborated to develop action plans to advance the GFP values.\nExecutive Order 8 “MOFP shall establish a Good Food Purchasing Program, the goal of which shall include the study and publication of data, on an annual basis, that provides transparency about how mayoral agencies’ procurements impact core values relating to local economies, environmental sustainability, valued workforce, animal welfare, and nutrition affecting the health of all New Yorkers.”\n\n\nNYC values and metrics\n\n\nAgency food procurement\nNYC Food Policy Dashboard shows NYC food purchasing from the 2019 school year through the 2023 school year.\nFiscal Year 2023 citywide data highlights\n\nTotal Food Spend: ~$460M\nAgencies with largest food spend: NYC Public Schools, DHS, NYC Aging\nTotal Food Spend Analyzed: ~330M\nAgencies with most complete data available: NYC Public Schools, HRA, H+H, DOC\nTotal GHG emissions: ~260K tons CO2e\nNY State Food Spend: 42%\nNY MWBE Food Spend: 2%\nNY Food Standards Compliance: 95%\n\n\n\n\nNew York State production (supply)\n\nDry beans\nDry bean production is centralized in western New York, according to the 2017 USDA Ag Census (USDA National Agricultural Statistics Service, n.d.). A small amount of acreage is scattered across the state, with the exact acreage counts suppressed by the USDA. These counties are shown as white on the map below. Grey counties have no reported acreage or an indication that data was suppressed.\nBetween the 2012 and 2017 USDA Ag Census, dry bean acreage and harvest quantity increased in the state. Total production increased from 199,581 CWT to 281,038 CWT, or a 40% increase. Acreage increased by 31% (or 2,977 acres) in the same time period. The use of irrigation decreased and the number of farmers reported to produce dry beans increased from 90 to 91. Eight key counties account for most of the state’s production and are all located in the same centralized region.\n\n\nBeef\nAgriculture is important to New York State. The value of agricultural production was over $5.40 billion in 2017. About 23 percent of the state’s land area, or 7 million acres, are used by the 33,000 farms to produce a very diverse array of food products (nybeef.org).\n\n\nGreens\nComing soon…",
    "crumbs": [
      "Research question"
    ]
  },
  {
    "objectID": "research_approach.html",
    "href": "research_approach.html",
    "title": "Research approach",
    "section": "",
    "text": "Stakeholder engagement\nBig picture\nThere is growing literature that talks about the importance of engaging stakeholders in all aspects of model design, building, and validation (e.g., Wentworth et al., 2024. Accordingly, this project incorporated commodity specific advisory committees. These advisory groups helped us to select and recruit relevant stakeholders to participate in focus groups and interviews. The focus groups and interviews were used to validate data, understand decision making, and establish model boundaries and decisions.",
    "crumbs": [
      "Research approach"
    ]
  },
  {
    "objectID": "research_approach.html#stakeholder-engagement",
    "href": "research_approach.html#stakeholder-engagement",
    "title": "Research approach",
    "section": "",
    "text": "Causal loop diagrams\nAs agent-based models are complex, conceptual diagrams such as causal loop diagrams are paramount to understanding and designing the general structure of the model. Using causal loop diagrams in participatory modeling exercises facilitates two important elements of model building. First, developing the causal loop diagrams serves as both a team building exercise and develops a shared understanding of the supply chain of interest. Second, it supports engagement with project stakeholders who may be most knowledgeable about the system being studied but may not have mathematical modeling expertise. Lastly, while it is rarely possible to depict all detail presented in the model in an accessible conceptual diagram, it enables the establishment of the early “building blocks” or general structure of the model including the agents and their connections.\nAll diagrams can be found in each commodity section.",
    "crumbs": [
      "Research approach"
    ]
  },
  {
    "objectID": "research_approach.html#modeling-approach",
    "href": "research_approach.html#modeling-approach",
    "title": "Research approach",
    "section": "Modeling approach",
    "text": "Modeling approach\nDrawing on publicly available data as well as input from food and agriculture stakeholders around New York State, this three-year research collaborative adapts an agent-based research model, building upon past agent-based modeling work in Denver, Colorado.\nThe CFPP model allows for the simulation of complex systems and the emergent behavior that may result from the autonomous actions of system agents with each other and their environment.\nThis model can simulate a variety of potential changes to a city’s food policy environment and to observe any resulting effects or feedback throughout various stages of the supply chain. To learn more, please visit our GitHub site.\n\nModel validations\nSupply chain and New York City agency stakeholders supported model validation. More details available in the commodity sections.",
    "crumbs": [
      "Research approach"
    ]
  },
  {
    "objectID": "drybeans/model_boundaries.html",
    "href": "drybeans/model_boundaries.html",
    "title": "1  Model boundaries",
    "section": "",
    "text": "1.1 Dry beans supply chain\nIn the model, each “agent” represents a type of food system participant—such as farms, food businesses, or City agencies—with distinct roles, constraints, decision rules, and characteristics. We refer to these as supply chain stakeholders, each of which has different types of characteristics. For example, a farm can have one or more of the following characteristics: small, certified organic, M/WBE operators.",
    "crumbs": [
      "Dry beans",
      "<span class='chapter-number'>1</span>  <span class='chapter-title'>Model boundaries</span>"
    ]
  },
  {
    "objectID": "drybeans/model_boundaries.html#supply-chain-stakeholder-types",
    "href": "drybeans/model_boundaries.html#supply-chain-stakeholder-types",
    "title": "1  Model boundaries",
    "section": "1.2 Supply Chain Stakeholder Types",
    "text": "1.2 Supply Chain Stakeholder Types\nProducer  Farms that grow beans using land, labor, and other farm inputs. This includes all on-farm production activities—from planting through harvest—but does not include activities such as cleaning or packaging.\nAggregator (Cleaner)  These businesses clean and sort dry beans. They may be owned by a single farm, a group of farms, or operate independently. They typically purchase beans in bulk (e.g., by the truckload) and resell them in smaller quantities or in containers for export markets. They operate either by purchasing beans and selling them after cleaning, or by providing cleaning and storage services for a fee.\nPrimary Processor  These businesses use cleaned beans as an input, such as canning operations, bean flour producers, and facilities that package beans into retail-sized bags.\nSecondary Processor  This is a secondary stage of processing beans into products. These businesses use beans from primary processors as inputs into their products. These include using cooked beans or bean flour to create a new product.\nWholesaler (Distributor)  Businesses that sell a product made by someone else. They can sell items from various stages in the supply chain.\nNYC Agency  A New York City agency that purchases processed bean products from various suppliers.\nCommodity and Differentiated Markets  Commodity markets (domestic or export) have effectively unlimited supply and demand and typically purchase at the lowest available price. They do not pay premiums for value characteristics (such as organic certification). Differentiated markets have more limited demand but often pay higher prices than commodity markets, reflecting preferences for specific product or business characteristics. \nOut-of-State-Supply Bean Pathway  Contract Information Pathway",
    "crumbs": [
      "Dry beans",
      "<span class='chapter-number'>1</span>  <span class='chapter-title'>Model boundaries</span>"
    ]
  },
  {
    "objectID": "drybeans/model_boundaries.html#causal-loop-diagram",
    "href": "drybeans/model_boundaries.html#causal-loop-diagram",
    "title": "1  Model boundaries",
    "section": "1.3 Causal loop diagram",
    "text": "1.3 Causal loop diagram\nComing soon…",
    "crumbs": [
      "Dry beans",
      "<span class='chapter-number'>1</span>  <span class='chapter-title'>Model boundaries</span>"
    ]
  },
  {
    "objectID": "drybeans/data_inputs.html",
    "href": "drybeans/data_inputs.html",
    "title": "2  Data inputs",
    "section": "",
    "text": "2.1 Agricultural production\nWe estimate cost of production for dry bean and soybean producers using a combination of data sources including the restricted access Census of Agriculture, crop budgets from select states, and interview data. Prices received by producer on the commodity market are based on price data from NASS and prices received on the differentiated market are based on interview data.",
    "crumbs": [
      "Dry beans",
      "<span class='chapter-number'>2</span>  <span class='chapter-title'>Data inputs</span>"
    ]
  },
  {
    "objectID": "drybeans/data_inputs.html#agricultural-production",
    "href": "drybeans/data_inputs.html#agricultural-production",
    "title": "2  Data inputs",
    "section": "",
    "text": "2.1.1 Cost of production\nUsing the restricted access data from the Census of Agriculture, we use the NASS defined variable, total expense, which includes all production expenses listed in the production expense section of the census and includes both fixed and variable expenses. Data are pulled for producers with dry bean sales. However, these data are at the whole farm level. We do not know the cost of production of beans specifically.\n\n2.1.1.1 Dry beans\nTo understand cost of production for New York bean producers, we use data from interviews conducted of New York bean producers, which estimate a cost of production of $525 per acre.\nWe also need a cost of production for bean producers outside of New York, as those are the producers currently supplying the New York City beans. Based on discussions with Michael, most of the beans come from North Dakota, so we base our cost of production on an enterprise budget from North Dakota. We also include the other crop budgets we could find for comparison/to provide range:\n\nNorth Dakota, 2024\n\nCost per acre: $434.05\n\nWyoming\n\nCost per acre: $598.70, cost per CWT $23.95\n\nColorado\n\nCost per acre: $454.57, cost per CWT $113.64\n\nTexas\n\nCost per acre: $400\n\n\nConclusions We will use the cost of production data from New York combined with Census of Agriculture data to estimate cost of production for different types of operations. For those outside of NY, we will provide a range based on the enterprise budgets we were able to find.\nFrom the Census of Agriculture, we have an average dry bean yield in NY of 20.5 CWT per acre to convert to production cost per lb.\nThe New York cost of production per acre is based on June’s assumption.\n\n2.1.1.1.1 NYS producers\n\nlibrary(tidyverse)\nlibrary(readxl)\nlibrary(openxlsx)\n\nny_production_cost_acre &lt;- 525\nny_production_cost_acre_se &lt;- 0.25*ny_production_cost_acre\n\n# Import fake data\ndrybeans &lt;- read_xlsx(\n  \"data_raw/coa_cost_per_acre.xlsx\", \n  sheet = \"drybeans\")\n\n# Add production cost per acre for beans from crop budget\ndrybeans &lt;- drybeans %&gt;% \n  mutate(\n    year = 2024,\n    baseline = ny_production_cost_acre, \n    baseline_se = ny_production_cost_acre_se,\n    production_cost_acre_mean = baseline + \n      (baseline*percent_diff_mean), \n    production_cost_acre_se =  baseline_se + \n      (baseline_se*percent_diff_se) \n    )\n\n# Rename to be consistent with other spreadsheet\ndrybeans &lt;- drybeans %&gt;% \n  mutate(\n    variable_name = case_when(\n      mwbe_fct==\"Not MWBE\" & \n        sales_class_agg == \"GCFI $1M or more\" & \n        organic_fct == \"No organic sales\" ~ \n        \"cost_of_production_drybean_more_mill_nonmwbe_conv\", \n      mwbe_fct==\"MWBE\" & \n        sales_class_agg == \"GCFI $1M or more\" & \n        organic_fct == \"No organic sales\" ~\n      \"cost_of_production_drybean_more_mill_mwbe_conv\",\n      mwbe_fct==\"Not MWBE\" & \n        sales_class_agg == \"GCFI less than $1M\" & \n        organic_fct == \"No organic sales\" ~ \n        \"cost_of_production_drybean_less_mill_nonmwbe_conv\", \n      mwbe_fct==\"MWBE\" & \n        sales_class_agg == \"GCFI less than $1M\" & \n        organic_fct == \"No organic sales\" ~ \n        \"cost_of_production_drybean_less_mill_mwbe_conv\", \n      mwbe_fct==\"Not MWBE\" & \n        sales_class_agg == \"GCFI less than $1M\" & \n        organic_fct == \"Organic sales\" ~\n        \"cost_of_production_drybean_less_mill_nonmwbe_org\")\n  ) \n\n# Keep only data we need\ndrybeans &lt;- drybeans %&gt;% \n  select(variable_name,\n         production_cost_acre_mean, production_cost_acre_se) %&gt;% \n  filter(!is.na(variable_name))\n\n\n\n2.1.1.1.2 Outside NYS producers\n\nNorth Dakota: 434.05\nWyoming: 598.70\nColorado: 454.57\nTexas: 400\n\n\n# Calculate mean and se from the data that we have\noutside_ny &lt;- tibble(\n  location = c(\"North Dakota\", \"Wyoming\", \"Colorado\", \"Texas\"), \n  cost_acre = c(434.05, 598.70, 454.57, 400)\n)\n\n# Calulate mean and standard error and include as vectors\nmean &lt;- outside_ny %&gt;% \n  summarise(mean = mean(cost_acre)) %&gt;% \n  pull()\n\nse &lt;- outside_ny %&gt;% \n  summarise(sd = sd(cost_acre), \n            n = n(), \n            se = sd/sqrt(n)) %&gt;% \n  pull(se)\n\ndrybeans &lt;- drybeans %&gt;% \n  add_row(\n    variable_name = \"cost_of_production_drybean_outsideNY\", \n    production_cost_acre_mean = mean, \n    production_cost_acre_se = se)\n\n\n# ADD in N/As for options not included \nnames &lt;- tibble(\n  variable_name = \n    c(\"cost_of_production_drybean_more_mill_nonmwbe_conv\",\n      \"cost_of_production_drybean_more_mill_mwbe_conv\",\n      \"cost_of_production_drybean_less_mill_nonmwbe_conv\", \n      \"cost_of_production_drybean_less_mill_mwbe_conv\", \n      \"cost_of_production_drybean_more_mill_nonmwbe_org\",\n      \"cost_of_production_drybean_more_mill_mwbe_org\", \n      \"cost_of_production_drybean_less_mill_nonmwbe_org\", \n      \"cost_of_production_drybean_less_mill_mwbe_org\", \n      \"cost_of_production_drybean_outsideNY\")\n)\n\n# Join \ndrybeans &lt;- left_join(names, drybeans)\n\nrm(names)\n\n# Add in $ per hectare (1 hectare) = 2.471 acres)\ndrybeans &lt;- drybeans %&gt;% \n  mutate(\n    production_cost_hectare_mean = production_cost_acre_mean*2.471, \n    production_cost_hectare_se = production_cost_acre_se*2.471\n  )\n\nrm(outside_ny)\n\n\n\n\n2.1.1.2 Soybeans\nWe use Census of Agriculture data and keep only those producers with soybean sales. Because we only have soybean producers, then the total cost per acre is for soybeans only and we don’t need to use a crop budget.\nIn NY there are not enough farms in some categories. So we modify that NY data that we have up or down based on the national numbers.\nConventional soybean producers in NY have 50% higher production costs than compared to the US. We take the numbers we have by scale, MWBE, organic and increase them by 50%.\nCrop budgets for comparison:\n\nOhio in 2022\nConventional: 761/acre.\nThere is no data for organic until 2024, which is 946/acre. For comparison, conventional soy in 2024 was 754/acre.\nLouisiana in 2022\n454/acre\nAlabama in 2025\n471/acre\n\n\n# Import data\nsoybeans &lt;- read_xlsx(\n  \"data_raw/coa_cost_per_acre.xlsx\", \n  sheet = \"soybeans\")\n\nny_inflation &lt;- soybeans %&gt;% \n  filter(sample==\"NY\") %&gt;%\n  pull(percent_diff_mean) \n\n# Inflate the means/se by the ny inflation number\nsoybeans &lt;- soybeans %&gt;% \n  select(mwbe_fct:se) %&gt;%\n  filter(mwbe_fct != \"all\") %&gt;% \n  mutate(\n    mean = mean + (mean*ny_inflation), \n    se = se + (se*ny_inflation)\n  )\n  \n# Rename\nsoybeans &lt;- soybeans %&gt;% \n  mutate(\n    variable_name = case_when(\n      mwbe_fct==\"Not MWBE\" & \n        sales_class_agg == \"GCFI $1M or more\" & \n        organic_fct == \"No organic sales\" ~ \n        \"cost_of_production_soy_more_mill_nonmwbe_conv\", \n      mwbe_fct==\"MWBE\" & \n        sales_class_agg == \"GCFI $1M or more\" & \n        organic_fct == \"No organic sales\" ~\n      \"cost_of_production_soy_more_mill_mwbe_conv\",\n      mwbe_fct==\"Not MWBE\" & \n        sales_class_agg == \"GCFI less than $1M\" & \n        organic_fct == \"No organic sales\" ~ \n        \"cost_of_production_soy_less_mill_nonmwbe_conv\", \n      mwbe_fct==\"MWBE\" & \n        sales_class_agg == \"GCFI less than $1M\" & \n        organic_fct == \"No organic sales\" ~ \n        \"cost_of_production_soy_less_mill_mwbe_conv\", \n      mwbe_fct==\"Not MWBE\" & \n        sales_class_agg == \"GCFI less than $1M\" & \n        organic_fct == \"Organic sales\" ~\n        \"cost_of_production_soy_less_mill_nonmwbe_org\", \n      mwbe_fct==\"MWBE\" & \n        sales_class_agg == \"GCFI less than $1M\" & \n        organic_fct == \"Organic sales\" ~\n        \"cost_of_production_soy_less_mill_mwbe_org\"))\n\n# add all names so blanks where no data\nnames &lt;- tibble(\n  variable_name = c(\n    \"cost_of_production_soy_more_mill_nonmwbe_conv\", \n    \"cost_of_production_soy_more_mill_mwbe_conv\", \n    \"cost_of_production_soy_less_mill_nonmwbe_conv\", \n    \"cost_of_production_soy_less_mill_mwbe_conv\", \n    \"cost_of_production_soy_more_mill_nonmwbe_org\", \n    \"cost_of_production_soy_more_mill_mwbe_org\", \n    \"cost_of_production_soy_less_mill_nonmwbe_org\", \n    \"cost_of_production_soy_less_mill_mwbe_org\", \n    \"cost_of_production_soy_outsideNY\")\n)\n\n# Join \nsoybeans &lt;- left_join(names, soybeans)\n\n# Keep columns of interest\nsoybeans &lt;- soybeans %&gt;% \n  select(variable_name, mean, se)\n\n# Rename and add in $ per hectare (1 hectare) = 2.471 acres)\nsoybeans &lt;- soybeans %&gt;% \n  rename(\n    production_cost_acre_mean = mean, \n    production_cost_acre_se = se) %&gt;% \n  mutate(\n    production_cost_hectare_mean = production_cost_acre_mean*2.471,\n    production_cost_hectare_se = production_cost_acre_se*2.471)\n\n\n\n2.1.1.3 Save\nCombine all data into one file and save. Final cost of production data\n\n# Combine dry bean and soybean data\nproduction_cost &lt;- bind_rows(drybeans, soybeans) \n\n# Write to file\nwb &lt;- createWorkbook()\n\n# Add info\ninfo &lt;- tibble(\n  sheet_name = \"production_cost\", \n  description = \"Mean and standard deviation for cost of production per acre and hectare for dry bean and soybean growers. Costs are by crop, location (in NY/outside NY), scale (under/over $M), organic, and MWBE).\",\n  notes = \"Missing data means there were no farms of that type in the data.\", \n  source = \"Restricted access census of agriculture and crop budgets. See Quarto file for more information.\"\n)\n\n# Add worksheets and save\naddWorksheet(wb, \"info\")\nwriteData(wb, \"info\", info)\n\naddWorksheet(wb, \"production_cost\")\nwriteData(wb, \"production_cost\", production_cost)\n\nsaveWorkbook(wb, \"data_final/production_cost.xlsx\", \n             overwrite = TRUE)\n\nrm(list=ls())\n\n\n\n\n2.1.2 Prices\n\n2.1.2.1 NASS prices\nFor prices for conventionally grown dry beans (dry edible beans, excluding chickpeas) and soybeans, we use price data from USDA NASS Quick Stats. All data in price per cwt for dry edible beans and bushels for soybeans. Soybean data is based on soybeans for beans. For the model, they want everything in terms of kilograms, so we convert to dollars per kg.\n\n# Import quick stats data\nprice &lt;- read_csv(\"data_raw/quick_stats_conventional_bean_prices.csv\") %&gt;% \n  janitor::clean_names()\n\n# keep columns of interest\nprice &lt;- price %&gt;% \n  select(year, commodity, value)\n\n\n\n2.1.2.2 Convert to $/lb and $/kg\nAll data in price per cwt for dry edible beans and bushels for soybeans. Soybean data is based on soybeans for beans.\nWe convert everything to price per killogram, as required by the model and price per lb.\nDry beans 1 cwt = 100 pounds 1 pound = 0.45359 kg 1 cwt = 45.359 kg\nSoybeans 1 bushel of soybeans = 60 pounds (this is the standard weight) 1 pound = 0.45359 kg 1 bushel of soybeans = 60 × 0.45359 = 27.216 kg\n\n# Dry beans- convert to price/kg\nprice &lt;- price %&gt;% \n  mutate(\n    price_per_kg = case_when(\n      commodity == \"BEANS\" ~ value/45.359, \n      commodity == \"SOYBEANS\" ~ value/27.216\n    ), \n    price_per_lb = case_when(\n      commodity == \"BEANS\" ~ value/100, \n      commodity == \"SOYBEANS\" ~ value/60\n    )\n  ) \n\n# Rename and select colums of interest\nprice &lt;- price %&gt;% \n  mutate(\n    variable_name = case_when(\n      commodity == \"BEANS\" ~ \"commodity_price_drybean_conv\", \n      commodity == \"SOYBEANS\" ~ \"commodity_price_soy_conv\")\n  ) %&gt;% \n  select(year, commodity, variable_name, starts_with(\"price\"))\n\n\n\n2.1.2.3 PPI\nWe present data in 2023 prices used the St. Louis Fed, Producer Price Index by Commodity for soybeans and dry beans.\nThe price index for dry beans starts in 2015, we use the 2015 value for 2014.\n\n# Import PPI\nppi_drybeans &lt;- read_csv(\"data_raw/WPU0113011_drybeans.csv\") %&gt;% \n  rename(\n    drybeans = WPU0113011\n  )\n\nppi_soybeans &lt;- read_csv(\"data_raw/WPU01830131_soybeans.csv\") %&gt;% \n  rename(\n    soybeans = WPU01830131\n  )\n\nppi &lt;- left_join(ppi_soybeans, ppi_drybeans)\nrm(ppi_drybeans, ppi_soybeans)\n\n# Add year and drop data we don't need\nppi &lt;- ppi %&gt;% \n  mutate(\n    year = year(observation_date)\n  ) %&gt;% \n  filter(\n    year &lt;2025 & year &gt; 2013\n  )\n\n# Get average per year\nppi &lt;- ppi %&gt;% \n  group_by(year) %&gt;% \n  summarise(drybeans = mean(drybeans, na.rm = TRUE), \n            soybeans = mean(soybeans)) %&gt;% \n  ungroup\n\n# Get index to convert to 2023 dollars\nppi &lt;- ppi %&gt;% \n  mutate(\n    drybeans_index = drybeans[year == 2023]/drybeans, \n    soybeans_index = soybeans[year == 2023]/soybeans\n  )\n  \n# Make 2014 index for dry beans equal to 2015\nppi &lt;- ppi %&gt;% \n  mutate(\n    drybeans_index = case_when(\n      is.nan(drybeans_index) ~ drybeans_index[year==2015], \n      TRUE ~ drybeans_index)\n    )\n\n# Put in correct format to join with price data\nppi &lt;- ppi %&gt;% \n  select(year, drybeans_index, soybeans_index) %&gt;% \n  pivot_longer(\n    cols = !year, \n    names_to = \"commodity\", \n    values_to = \"ppi_index\"\n  ) %&gt;% \n  mutate(\n    commodity = case_when(\n      commodity == \"drybeans_index\" ~ \"BEANS\", \n      commodity == \"soybeans_index\" ~ \"SOYBEANS\")\n    ) \n\n# Join price and ppi data\nprice &lt;- price %&gt;% \n  left_join(ppi)\n\n# Convert prices to 2023 dollars\nprice &lt;- price %&gt;% \n  mutate(\n    real_price_kg_2023dollars = price_per_kg * ppi_index\n  ) %&gt;%\n  rename(\n    nominal_price_kg = price_per_kg, \n    nominal_price_lb = price_per_lb) %&gt;%\n  select(-ppi_index)\n\n# Round\nprice &lt;- price %&gt;% \n  mutate(across(nominal_price_kg:last_col(), \n                ~round(., 2))) %&gt;% \n  ungroup()\n\n# Drop commodity\nprice &lt;- price %&gt;% \n  select(-commodity)\n\n# rename\nprice_full &lt;- price\n\n\n\n2.1.2.4 Commodity price\nWe use the data collected above using 2023 dollars and convert the data to be in a similar format to the cost of production data. In this case, we will have different prices for organic, conventional, and New York beans sold through differentiated channels (not data on soy for this category).\n\n# Keep 2023 data only\nprice &lt;- price %&gt;% \n  filter(year == 2023)\n\n\n\n\n2.1.3 Organic\nWe use data from The Risk Management Agency (RMA) on approved the 2023 CY projected prices shown below for the following plans of insurance: Yield Protection, Revenue Protection, and Revenue Protection with Harvest Price Exclusion.\nThe projected price per pound for drybeans is double for organic compared to conventional. We double all conventional prices.\nFor soybeans, we use Price discoverty data from the RMA.\n\n# import soy data \nsoy_organic &lt;- read_xlsx(\"data_raw/RMA_soybeans.xlsx\", \n                         sheet = \"Current Periods\") %&gt;% \n  janitor::clean_names()\n\n# Select data of interest \nsoy_organic &lt;- soy_organic %&gt;% \n  select(commodity_year, practice_name, state_name, projected_price)\n\n# compare prices for organic and conventional for the same state year\nsoy_organic &lt;- soy_organic %&gt;% \n  group_by(commodity_year, practice_name) %&gt;% \n  summarise(\n    price = mean(projected_price)\n  ) %&gt;%\n  mutate(\n    organic_conventional = \n      price[practice_name==\"Organic\"] /\n      price[practice_name==\"Conventional\"]\n    ) %&gt;% \n  slice(1) %&gt;%\n  pull(organic_conventional)\n  \n# Get price/per kg. for drybeans and add organic (*2)\ndrybean_price &lt;- price %&gt;% \n  filter(variable_name==\"commodity_price_drybean_conv\")\n\ndrybean_price &lt;- drybean_price %&gt;%\n  bind_rows(\n    drybean_price %&gt;%\n      mutate(\n        across(nominal_price_kg:last_col(), \n                    ~. * 2), \n        variable_name = \"commodity_price_drybean_organic\")\n  )\n\n# Get price/per kg. for soybeans\nsoybean_price &lt;- price %&gt;% \n  filter(variable_name==\"commodity_price_soy_conv\") \n\nsoybean_price &lt;- soybean_price %&gt;%\n  bind_rows(\n    soybean_price %&gt;%\n      mutate(\n        across(nominal_price_kg:last_col(), \n                    ~. * soy_organic), \n        variable_name = \"commodity_price_soybean_organic\")\n  )\n\n# Bind rows\nprice &lt;- bind_rows(drybean_price, soybean_price)\n\nrm(soy_organic, drybean_price, soybean_price)\n\n\n2.1.3.1 Differentiated price\nWe use data from the interviews to understand differentiated prices\nNY Bean: Breakdown on a 50lb bag: Grower receives $52; Cleaner $5; $57 price out the door\n\n# Dry beans ppi for coverting 2024 dollars to 2023 dollars\nppi_vector &lt;- ppi %&gt;% \n  filter(year==2024 & commodity==\"BEANS\") %&gt;% \n  pull(ppi_index)\n\n# Add differentiated data\ndiff_price &lt;- tibble( \n    year = 2023,\n    variable_name = \"differentiated_price_drybean_conventional\", \n    nominal_price_lb = 52/50, \n    nominal_price_kg = nominal_price_lb * 0.45359237, \n    real_price_kg_2023dollars = nominal_price_kg * ppi_vector\n)\n\n# Add organic by multiplying by 2\ndiff_price &lt;- diff_price %&gt;% \n  bind_rows(\n    diff_price %&gt;% \n      mutate(\n        across(nominal_price_lb:last_col(), \n                    ~. * 2), \n        variable_name = \"differentiated_price_drybean_organic\")\n  )\n\n# Bind rows\nprice &lt;- bind_rows(price, diff_price)\n\n\n\n\n2.1.4 Save\nCombine all data into one file and save. Final cost of production data\n\n# Add worksheet\nwb &lt;- createWorkbook()\naddWorksheet(wb, \"farmgate_price\")\nwriteData(wb, \"farmgate_price\", price)\n\n# Add info\ninfo &lt;- tibble(\n  sheet_name = c(\"farmgate_price\"), \n  description = \"Price received by the producer in $/lb. and $/kg. by year for drybeans and soybeans, conventional and organic, commodity and differentiated (i.e., grown in NY and through a source verified channel). All prices are national, except for the differentiated\", \n  notes = \"Nominal prices are reported as the price that was receved in that year. real_price_kg is the price per kg., adjusted for inflation, reported in 2023 dollars. real_price_kg the number that is used in the model. We use 2023 dollars because that is the year of data we are using for school purchases\", \n  source = \"USDA NASS Quick stats for conventional prices, RMA data to inflate numbers for organic prices, interview data for differentiated price.\")\n\n# Add worksheet\naddWorksheet(wb, \"info\")\nwriteData(wb, \"info\", info)\n\n# Save\nsaveWorkbook(wb, \"data_final/farmgate_price_received.xlsx\", \n             overwrite = TRUE)",
    "crumbs": [
      "Dry beans",
      "<span class='chapter-number'>2</span>  <span class='chapter-title'>Data inputs</span>"
    ]
  },
  {
    "objectID": "drybeans/data_inputs.html#processing-and-distribution",
    "href": "drybeans/data_inputs.html#processing-and-distribution",
    "title": "2  Data inputs",
    "section": "2.2 ## Processing and distribution",
    "text": "2.2 ## Processing and distribution",
    "crumbs": [
      "Dry beans",
      "<span class='chapter-number'>2</span>  <span class='chapter-title'>Data inputs</span>"
    ]
  },
  {
    "objectID": "drybeans/data_inputs.html#eval-false",
    "href": "drybeans/data_inputs.html#eval-false",
    "title": "2  Data inputs",
    "section": "2.3 eval: false",
    "text": "2.3 eval: false\n\n2.3.1 Description of Data Sources\nAll of the data from this file will be used to inform the supply chain of the ABM model.\nIn this file we compile and merge data from three sources:\n\nBusinesses that have previously sold to New York City\nBusinesses that are located in New York from the Simply Analytics database that are processors or wholesalers/distributors of beans, leafy greens, or beef\nBusinesses that were interviewed as part of this project.\nBusinesses that were part of a list of businesses that sell NY Grown and Certified products\n\nThe following information is needed from each business:\n\nLocation (in NY or not)\nRole in the supply chain\nHas the business sold to New York City\nDoes the business sell multiple commodities\nMWBE or not\nWorks with local farms\nInventory capacity\n\nIn all data sets, the capitalization is different. We just leave all data capitalized so as to not have issues with matching that are a result of capitalization.\nLocation All data sets have information on if the business is located in NYS or not\nRole in the supply chain For those businesses that are wholesalers/distributors, we have that information in all data sets. For processors, we do not have detailed enough information available in the SimplyAnalytics data and those are gathered by hand through web searches. For example with beans, we know which businesses process beans but we do not know if they are a primary or secondary processor. We do have that level of detail available in the data gathered through our interviews.\nHas the business sold to NYC Any business that is in the NYC data we indicate has sold to NYC, we assume all other businesses have not.\nDoes the business sell multiple commodities These data are not available in the SimplyAnalytics data and are collected manually in a similar manner to the role in the supply chain.\nMWBE These data are listed in the NYC data and the interview data. For the SimplyAnalytics data, in order to determine if businesses are MWBE, we use a New York State database and a NYC database.\nWorks with local farms Businesses that sell locally are assumed to be those that were interviewed as part of this project and those found in the Vendor Contact List in the NY Food Product Database.\nInventory capacity Data from SimplyAnalytics have sales volumes, data from NYC has sales to NYC from the three commodities of interest, and a few of the respondents from the interview data have inventory capacity. {{Becca ADD here how computed}}.\nNote: We have removed business names and phone numbers, but have retained addresses and latitude/longitude. In some cases, businesses were matched in these data using names. Those data are not available in this public repository.\n\n\n2.3.2 Simply Analytics\nSimply Analytics is a web-based mapping application that allows users to map bushiness by name or by industry. Data are available to Cornell researchers through the Management Library. We collected data from (ADD YEAR) on the NAICS codes that are relevant to processing, distribution and wholesaling of dry beans, beef and leafy greens.\nWe use data aggregated at the 6-digit NAICS code.\nWe assume wholesalers/wharehousing and storage is the same for all commodities and that processing is commodity specific.\nThe NAICS codes of interest for us include:\n\n311211 Flour Milling (beans)\n311411 Frozen Fruit, Juice, and Vegetable Manufacturing (leafy greens)\n311412 Frozen Specialty Food Manufacturing (beans and leafy greens)\n311421 Fruit and Vegetable Canning (beans and leafy greens)\n311422 Specialty Canning (beans, leafy greens, beef)\n311611 Animal (except Poultry) Slaughtering (beef)\n311612 Meat Processed from Carcasses (beef)\n311613 Rendering and Meat Byproduct Processing (beef)\n311615 Poultry Processing (beans, leafy greens, beef)\n311812 Commercial Bakeries (leafy greens - knishes)\n311813 Frozen Cakes, Pies, and Other Pastries Manufacturing (leafy greens - knishes)\n311824 Dry Pasta, Dough, and Flour Mixes Manufacturing from Purchased Flour (beans)\n424420 Packaged Frozen Food Merchant Wholesalers\n424440 Poultry and Poultry Product Merchant Wholesalers\n424410 General Line Grocery Merchant Wholesalers\n424420 Packaged Frozen Food Merchant Wholesalers\n424470 Meat and Meat Product Merchant Wholesalers\n424480 Fresh Fruit and Vegetable Merchant Wholesalers\n424490 Other Grocery and Related Products Merchant Wholesalers\n424510 Grain and Field Bean Merchant Wholesalers\n484110 General Freight Trucking, Local\n484121 General Freight Trucking, Long-Distance, Truckload\n484122 General Freight Trucking, Long-Distance, Less Than Truckload\n493110 General Warehousing and Storage\n493120 Refrigerated Warehousing and Storage\n493130 Farm Product Warehousing and Storage\n493190 Other Warehousing and Storage\n\n\n2.3.2.1 Import and clean data\n\nlibrary(tidyverse)\nlibrary(openxlsx)\nlibrary(janitor)\nlibrary(readxl)\n\n# Create workbook\nwb &lt;- createWorkbook()\n\n# Define file path\nfile_path &lt;- \"data_raw/ToddNAICS4.xlsx\"\n\n# Define sheet names of interest\nsheet_names &lt;- c(\"Wholesaling (42)\", \"Transportation (48)\", \n                 \"Warehousing & Storage (49)\")\n\n# Import data\nnaics_df &lt;- sheet_names %&gt;% \n  set_names() %&gt;% \n  map_dfr(~read_excel(file_path, sheet = .x) %&gt;% \n            select(NAICS, Description, `Company Name`, `Business Name`, \n                   City, State, `Zip Code`, \n                   `Sales Volume`, `Total Employees`, `Local Employees`, \n                   `Year Started`) %&gt;%\n            mutate(\n              `Zip Code` = as.character(`Zip Code`), \n              `Year Started` = as.numeric(`Year Started`)), \n          .id = \"sheet_name\") %&gt;% \n  clean_names()\n\n# Import manufacturing data separately due to different column names \nmfg &lt;- read_excel(\"data_raw/ToddNAICS4.xlsx\", \n                  sheet = \"Mfg2\") %&gt;% \n  clean_names() %&gt;% \n  mutate(sheet_name = \"Mfg2\", \n         zip_code = as.character(zip_code))\n\n# bind rows\nnaics_df &lt;- bind_rows(mfg, naics_df)\nrm(mfg)\n\n# Filter naics of interest\nnaics_list &lt;- c(\"311211\", \"311411\", \"311412\", \"311421\", \n                \"311422\", \"311611\", \"311612\", \"311613\", \n                \"311812\", \"311813\", \"311824\", \"311615\",\n                \"424420\", \"424440\", \"424410\", \"424420\", \n                \"424470\", \"424480\", \"424490\", \"424510\", \n                \"484110\", \"484121\", \"484122\", \"493110\", \n                \"493120\", \"493130\", \"493190\")\n\nnaics_df &lt;- naics_df %&gt;% \n  filter(naics %in% naics_list)\n\n\n\n2.3.2.2 Duplicates\nIn these data, many companies are listed multiple times if they have multiple locations. In some cases, the data on sales and employees (variables of interest) are repeated and exactly the same across the multiple listings and in some cases they are different. For those observations with different data across the duplicated rows, we want to add up the sales and employment. For those that are the same across duplicated rows, we keep the first row of data.\nOf the duplicates, one business is located outside of NY.\n\n# Look at duplicates \nduplicates &lt;- naics_df %&gt;% \n  filter(duplicated(company_name) | duplicated(company_name, fromLast = TRUE))\n\n# Create a dummy variable that indicates if sales and employment data is duplicated or not\nnaics_df &lt;- naics_df %&gt;% \n  group_by(company_name) %&gt;%\n  mutate(\n    same = case_when(\n      n_distinct(sales_volume)==1 & \n        n_distinct(total_employees)==1 & \n         n_distinct(local_employees)==1 ~ 1, \n      TRUE ~ 0)) \n    \n# Summarise data for those that are duplicated and different and return first row for those that are duplicated and the same\nnaics_df &lt;- naics_df %&gt;% \n  select(naics, description, company_name, state, sales_volume, \n         total_employees, local_employees, same) %&gt;%\n  group_by(naics, description, company_name, state) %&gt;%\n  reframe(\n    sales_volume = case_when(\n      same==0 ~ sum(sales_volume), \n      same==1 ~ first(sales_volume)),\n    total_employees = case_when(\n      same==0 ~ sum(total_employees), \n      same==1 ~ first(total_employees)), \n    local_employees = case_when(\n      same==0 ~ sum(local_employees), \n      same==1 ~ first(local_employees))) %&gt;% \n  ungroup() %&gt;%\n  distinct(company_name, .keep_all = TRUE)\n\n\n\n2.3.2.3 Define variables\nLocally owned Using these data, we add a variable “Locally owned”. This is defined as not locally owned (i.e, locally_owned==0) when total employees equals zero or if total employees are greater than local employees. Otherwise, it is a local employer.\nSupply chain role For the the processing sectors of the supply chain, we specify the commodity, and for the wholesale/distribution sectors we assume the sell all three commodities.\nFor beans, there are cleaner/aggregators, primary processors, and secondary processors. There are only a couple of cleaner/aggregators in the state and all are known. From the SimplyAnalytics data, we only know if the business is a bean processor, we don’t know if it is a primary or secondary processor. We will indicate here that the business is a bean processor (based on the NAICS) and primary/secondary processor will be hand coded based on web searches.\nLocated in NY or not We create a dummy variable with a 1 if in NY and 0 otherwise.\n\n# Define locally owned\nnaics_df &lt;- naics_df %&gt;% \n  mutate(\n    locally_owned = case_when(\n      total_employees==0 | \n        total_employees&gt;local_employees ~ 0, \n      TRUE ~ 1))\n\n# Supply chain role\nnaics_df &lt;- naics_df %&gt;% \n  mutate(\n    beans_processor = case_when(\n      naics %in% c(311211, 311412, 311421, 311422, 311824, 311615) ~ 1, \n      TRUE ~ 0), \n    leafy_greens_processor = case_when(\n      naics %in% c(311411, 311412, 311421, 311422, 311812, 311813, 311615) ~ 1, \n      TRUE ~ 0), \n    beef_processor = case_when(\n      naics %in% c(311422, 311611, 311612, 311613, 311615) ~ 1, \n      TRUE ~ 0), \n    wholesaler_distributor = case_when(\n      naics %in% c(424420, 424440, 424410, 424420, \n                    424470, 424480, 424490, 424510, \n                    484110, 484121, 484122, 493110,  \n                    493120, 493130, 493190) ~ 1, \n      TRUE ~ 0))\n\n# Define NY dummy\nnaics_df &lt;- naics_df %&gt;% \n  mutate(\n    ny = case_when(\n      state==\"NY\" ~ 1, \n      TRUE ~ 0))\n\n# drop data that has na for company name\nnaics_df &lt;- naics_df %&gt;% \n  filter(!is.na(company_name))\n\n# Keep columns of interest\nnaics_df &lt;- naics_df %&gt;% \n  select(-state)\n\n# Add source\nnaics_df &lt;- naics_df %&gt;% \n  mutate(\n    simply_analytics=1)\n\n\n\n\n2.3.3 New York City Purchasing\nHere we want the data from Citywide, which is what is downloaded when you download the full purchasing data from the NYC Food Policy Dashboard.\nWe keep all data relevant to our three commodities for the year 2022, based on primary food product category equal to legumes, vegetables, or beef.\nWe assume for the column called ny_state_spend_y_n, a y means that the food purchased was from New York State. Here I add a variable called ny = 1 if Yes. This is the same as the state column from the Simply Analytics data. This is different than in the SimplyAnalytics data that indicates where the business is located.\nWe assume all businesses listed under origin_detail are processors and get the beef, beans, greens based on the products they sold and all other businesses are wholesaler/distributors.\nWe want to match data for all businesses listed. For each row there is a column called origin detail, distributor and vendor. In some cases the businesses are the same and in others they are not. We assume the information listed in each row pertains to all businesses listed in the row (e.g., if the row says MWBE==1, then the origin detail, distributor and vendor business is MWBE). We create a new column called company_name that includes all of the businesses listed in each column. We do not retain the columns pertaining to how much was purchased by NYC.\n\n# Import data\nnyc_df &lt;- read_xlsx(\"data_raw/Public-Dashboard-Data-for-Download-FY19-23.xlsx\", \n                 sheet = \"Citywide\") %&gt;% \n  clean_names()\n\n# filter data of interest\nnyc_df &lt;- nyc_df %&gt;% \n  filter(time_period ==2022 & \n           primary_food_product_category %in% c(\"Beef\", \"Legumes\", \"Vegetables\")) \n\n# Keep variables of interest\nnyc_df &lt;- nyc_df %&gt;% \n  select(\n    origin_detail, distributor, vendor,\n    primary_food_product_category,\n    mwbe_y_n:last_col())\n\n# Add supply chain role, ny, sold to nyc, change mwbe to a dummy\nnyc_df &lt;- nyc_df %&gt;% \n  mutate(ny = case_when(\n           ny_state_spend_y_n==\"Y\" ~ 1, \n           TRUE ~ 0), \n         sold_to_NYC = 1, \n         mwbe = case_when(\n           mwbe_y_n==\"Y\" ~ 1, \n           TRUE ~ 0)) %&gt;% \n  select(!c(mwbe_y_n, mbe_y_n, wbe_y_n))\n   \n# Make all business names capitalized to join with Simply Analytics data\nnyc_df &lt;- nyc_df %&gt;% \n  mutate(across(c(origin_detail, vendor, distributor),\n                ~str_to_upper(.)))\n\n# Keep columns of interest\nnyc_df &lt;- nyc_df %&gt;% \n  select(origin_detail, vendor, distributor, primary_food_product_category,\n         ny:last_col())\n\n# Get one column with all business names from origin_detail, vendor, distributor\nnyc_df &lt;- nyc_df %&gt;% \n  pivot_longer(\n    cols = !c(primary_food_product_category, ny, sold_to_NYC, mwbe), \n    names_to = \"name\", \n    values_to = \"company_name\") \n\n# Add supply chain location \nnyc_df &lt;- nyc_df %&gt;% \n  mutate(\n    beans_processor = case_when(\n      name == \"origin_detail\" & primary_food_product_category==\"Legumes\" ~ 1, \n      TRUE ~ 0), \n    beef_processor = case_when(\n      name == \"origin_detail\" & primary_food_product_category==\"Beef\" ~ 1, \n      TRUE ~ 0),\n    leafy_greens_processor = case_when(\n      name == \"origin_detail\" & primary_food_product_category==\"Vegetables\" ~ 1, \n      TRUE ~ 0),\n    wholesaler_distributor = case_when(\n      name %in% c(\"vendor\", \"distributor\") ~ 1, \n      TRUE ~ 0))\n\n# Keep distinct observations only and drop blanks\nnyc_df &lt;- nyc_df %&gt;% \n  distinct(company_name, .keep_all = TRUE) %&gt;% \n  filter(company_name != \"(BLANK)\")\n\n# drop data that has na for company name\nnyc_df &lt;- nyc_df %&gt;% \n  filter(!is.na(company_name)) \n\n# Drop columns we don't need\nnyc_df &lt;- nyc_df %&gt;% \n  select(company_name, ny, sold_to_NYC, mwbe, \n         beans_processor:last_col())\n\n# Add source\nnyc_df &lt;- nyc_df %&gt;% \n  mutate(\n    nyc_dashboard = 1)\n\n\n\n2.3.4 NYC purchasing collected by June\nJune collected additional NYC purchasing data from businesses listed in 2023. These get a special designation as they will be included as our out of state businesses that are explicitly included in the model.\n\n# Import data\nnyc_23_df &lt;- read_xlsx(\"data_raw/nyc_dashboard_2023additions.xlsx\")\n\n# Make business names upper case\nnyc_23_df &lt;- nyc_23_df %&gt;% \n  mutate(company_name = toupper(company_name))\n\n# Add in identification \nnyc_23_df &lt;- nyc_23_df %&gt;% \n  mutate(outofstate_business = 1)\n\n\n\n2.3.5 Interview data (City Food Policy project)\nLastly, we import data on the businesses that were interviewed as part of the qualitative team interviews for this project. These businesses are designated as local and regional food system businesses indicating they could distribute source identified product (lrfs_business==1).\nThese data include some businesses that were not interviewed. I only include the rows, Wild Kale through Vermont Bean Crafters (i.e., those with data included in a additional columns).\nThere are a few files with the same data, we use the file DryBean_SupplyChain_data.xlsx as it has the data that we need in the easiest format to use.\n\n# Import data collected by the qualitative team\nqual_df &lt;- read_xlsx(\"data_raw/DryBean_SupplyChain_Data.xlsx\", \n                     sheet = \"Sheet1\") %&gt;% \n  clean_names()\n\n\n# Keep only data from those that were interviewed\nqual_df &lt;- qual_df %&gt;% \n  filter(!is.na(agents_tolerence_for_risk))\n\n# Change columns to be consistent (make business name capitalized to match with other data)\nqual_df &lt;- qual_df %&gt;% \n  mutate(\n    company_name = str_to_upper(business_name), \n    ny = case_when(\n      in_state_out_of_state == \"In-state\" ~ 1, \n      TRUE ~ 0), \n    aggregator_cleaner = case_when(\n      str_detect(supply_chain_segment, \"Aggregator|Cleaner|cleaner\") ~ 1, \n      TRUE ~ 0), \n    primary_processor = case_when(\n      str_detect(supply_chain_segment, \"Primary Processor\") ~ 1, \n      TRUE ~ 0), \n    secondary_processor = case_when(\n      str_detect(supply_chain_segment, \"Secondary Processor\") ~ 1, \n      TRUE ~ 0), \n    wholesaler_distributor = case_when(\n      str_detect(supply_chain_segment, \"Wholesaler|Distributor|copacker\") ~ 1, \n      TRUE ~ 0))\n\n# Keep data of interest\nqual_df &lt;- qual_df %&gt;% \n  select(company_name, ny, aggregator_cleaner:wholesaler_distributor, \n         mwbe, potential_maximum_inventory_capacity_annual_growth:product_attributes_organic)\n\n\n# Add local and regional food system business indicator for all businesses\nqual_df &lt;- qual_df %&gt;% \n  mutate(\n    lrfs_business=1)\n\n# Add a new column (to match with other data) on businesses that are beans processor\nqual_df &lt;- qual_df %&gt;% \n  mutate(\n    beans_processor = case_when(\n      aggregator_cleaner==1 | \n        primary_processor==1 | \n        secondary_processor==1 ~ 1, \n      TRUE ~ 0)) \n\n# Add source\nqual_df &lt;- qual_df %&gt;% \n  mutate(\n    interview_data = 1)\n\n\n\n2.3.6 NY Food Product Database\nWe use data the NY Food Product Database to identify businesses that sell New York branded products (lrfs==1).\nWe also keep any business listed here and not in the other data baseses.\nI assume the the MWBE certification is for the wholesaler and not for the processor.\n\n# Import data\nny_foods_df &lt;- read_csv(\"data_raw/NY Food Products - Approved-Grid View.csv\") %&gt;% \n  clean_names()\n\n# Select data of interest\nny_foods_df &lt;- ny_foods_df %&gt;% \n  select(sub_category, manufacturer, distributors, certifications)\n\n# Keep only those that have ny grown certification\nny_foods_df &lt;- ny_foods_df %&gt;% \n  filter(str_detect(certifications, \"NY Grown & Certified\"))\n\n# Add processor type based on sub_category\nny_foods_df &lt;- ny_foods_df %&gt;% \n  mutate(\n    beans_processor = case_when(\n      str_detect(sub_category, \"Legumes\") ~ 1, \n      TRUE ~ 0), \n    beef_processor = case_when(\n      str_detect(sub_category, \"Meat\") ~ 1, \n      TRUE ~ 0), \n    leafy_greens_processor = case_when(\n      str_detect(sub_category, \"Vegetables\") ~ 1, \n      TRUE ~ 0)) %&gt;% \n  select(!sub_category)\n\n## Add MWBE certification\nny_foods_df &lt;- ny_foods_df %&gt;% \n  mutate(\n    mwbe = case_when(\n      str_detect(certifications, \"M/WBE\") ~ 1, \n      TRUE ~ 0))\n\n# Multiple distributors are listed in each row separated by a comma, make into a separate list\nny_foods_df &lt;- ny_foods_df %&gt;%\n  separate_rows(distributors, sep = \",\\\\s*(?!\\\\s*Inc)\") %&gt;%\n  mutate(distributors = str_trim(distributors), \n         distributors = str_remove_all(distributors, '[\"\\']'))\n\n# Drop certification and merge columns with manufacturer and distributor in one list\nman &lt;- ny_foods_df %&gt;% \n  select(manufacturer, beans_processor, beef_processor, \n         leafy_greens_processor) %&gt;% \n  rename(company_name = manufacturer)\n\ndis &lt;- ny_foods_df %&gt;% \n  select(distributors, mwbe) %&gt;% \n  rename(company_name = distributors) %&gt;% \n  mutate(wholesaler_distributor = 1)\n\nny_foods_df &lt;- bind_rows(man, dis)\n\n# Fill NA's with zero\nny_foods_df &lt;- ny_foods_df %&gt;% \n  mutate(across(beans_processor:last_col(), \n                ~replace_na(., 0)))\n\n# Drop duplicates\nny_foods_df &lt;- ny_foods_df %&gt;% \n  distinct()\n\n# In some cases, there are multiple rows for the same business due to due them being a processor and distributor, we combine this information into one row\nny_foods_df &lt;- ny_foods_df %&gt;% \n  group_by(company_name) %&gt;% \n  summarise(across(beans_processor:last_col(), \n                   ~max(.))) %&gt;% \n  ungroup()\n\n# Make upper case and add lrfs column\nny_foods_df &lt;- ny_foods_df %&gt;% \n  mutate(company_name = toupper(company_name), \n         lrfs_business = 1)\n\n\n\n2.3.7 Combine data\nHere we merge our data. Because we have only a small handful of businesses that are in multiple data sets and those might have slightly different names, we first match those businesses in multiple data sets and then bind the remaining data after.\nI first create a list of all business names listed in the NYC data in each of the columns, origin detail, vendor, distributor. Then I join this with the Simply Analytics data.\nI then join the SimplyAnalytics data with the interview data.\n\n# Join NYC and SimplyAnalytics data using a fuzzy join, we want to keep all data and remove duplicates, there are no matches with the interview data\ndf_sa_nyc &lt;- fuzzyjoin::stringdist_inner_join(nyc_df, naics_df, \n                            by = \"company_name\", \n                            max_dist = 0.15, \n                            method = \"jw\")\n\n# Visually inspect and drop those not the same\ndf_sa_nyc &lt;- df_sa_nyc %&gt;% \n  filter(!company_name.y %in% c(\"HEALTHY PET FOODS INC.\",   \n                                \"CHROMEO\"))\n\n# Keep only one company name\ndf_sa_nyc &lt;- df_sa_nyc %&gt;% \n  select(-company_name.y) %&gt;% \n  rename(company_name = company_name.x)\n\n# Keep only the supply chain location from the NYC data and not Simply Analytics\ndf_sa_nyc &lt;- df_sa_nyc %&gt;% \n  select(-ends_with(\".y\")) \n\n# remove .x at the end of some variables\ndf_sa_nyc &lt;- df_sa_nyc %&gt;% \n  rename_with(~str_remove(.x, \"\\\\.x$\"), ends_with(\".x\"))\n\n## Join data from SA and interview data, keeping all columns from both data sets\ndf_sa_qual &lt;- fuzzyjoin::stringdist_inner_join(qual_df, naics_df, \n                                       by = \"company_name\", \n                                       max_dist = 0.15, \n                                       method = \"jw\")\n\n# Drop those that matched wrong\ndf_sa_qual &lt;- df_sa_qual %&gt;% \n  filter(!company_name.y %in% c(\"NEW YORK ONE LLC\", \"NEW YORK EMPANADA LLC\"))\n\n# Keep only one company name\ndf_sa_qual &lt;- df_sa_qual %&gt;% \n  rename(company_name = company_name.x) \n\n# Keep only the supply chain location from the interview data and not Simply Analytics\ndf_sa_qual &lt;- df_sa_qual %&gt;% \n  select(-ends_with(\".y\")) \n\n# remove .x at the end of some variables\ndf_sa_qual &lt;- df_sa_qual %&gt;% \n  rename_with(~str_remove(.x, \"\\\\.x$\"), ends_with(\".x\"))\n\n# Join all merged data\ndf &lt;- bind_rows(df_sa_nyc, df_sa_qual)\n\n# Add in zeros rather than NA for some columns\ndf &lt;- df %&gt;% \n  mutate(across(c(lrfs_business, nyc_dashboard, interview_data), \n                ~case_when(\n                  is.na(.) ~ 0, \n                  TRUE ~ .)))\n\n# Join NY certified data\nlrfs &lt;- fuzzyjoin::stringdist_inner_join(df, ny_foods_df, \n                            by = \"company_name\", \n                            max_dist = 0.15, \n                            method = \"jw\")\n\n# Pull list of lrfs businesses that match\nlrfs &lt;- lrfs %&gt;% \n  select(company_name.x) %&gt;% \n  pull()\n\n# Add lrfs_business==1 to those businesses that match\ndf &lt;- df %&gt;% \n  mutate(\n    lrfs_business = case_when(\n      company_name %in% lrfs ~ 1, \n      TRUE ~ lrfs_business))\n\n\n2.3.7.1 Drop merged data from original data\nBecause we are binding all data, we want to drop anything that did match from the original data sources.\n\n# Get a list of data that has matched and remove it from the other data sets\ncompany_list &lt;- df %&gt;% \n  select(company_name) %&gt;% \n  pull()\n\n# Drop from naics\nnaics_df &lt;- naics_df %&gt;% \n  filter(!company_name %in% company_list)\n\n# Drop from nyc\nnyc_df &lt;- nyc_df %&gt;% \n  filter(!company_name %in% company_list)\n\n# Drop from interview\nqual_df &lt;- qual_df %&gt;% \n  filter(!company_name %in% company_list)\n\n# Drop from nyc grown\nny_foods_df &lt;- ny_foods_df %&gt;% \n  filter(!company_name %in% company_list)\n\n\n\n2.3.7.2 Combine all data\n\n# Bind all data\ndf &lt;- bind_rows(df, naics_df, nyc_df, qual_df, nyc_23_df, ny_foods_df)\n\n# Convert NA's to zero where appropriate\ndf &lt;- df %&gt;% \n  mutate(across(c(ny:nyc_dashboard, simply_analytics, interview_data, \n                  lrfs_business, outofstate_business), \n                ~case_when(\n                  is.na(.) ~ 0, \n                  TRUE ~ .)))\n\n# Put in correct order\ndf &lt;- df %&gt;% \n  select(\n    company_name, ny, \n    beans_processor, beef_processor, leafy_greens_processor, wholesaler_distributor, \n    primary_processor, secondary_processor, aggregator_cleaner,\n    sold_to_NYC, mwbe, lrfs_business, outofstate_business, \n    nyc_dashboard, simply_analytics, interview_data, everything())\n\n\n\n2.3.7.3 Add MWBE\nNew York State provides a database with all New York State Contractors that are certified MWBE and by New York City.\nWe select the following commodity codes:\n\n019 - AGRICULTURAL CROPS AND GRAINS INCLUDING FRUITS, MELONS, NUTS\n375 - FOODS: BAKERY PRODUCTS (FRESH)\n380 - FOODS: DAIRY PRODUCTS (FRESH)\n385 - FOODS, FROZEN\n390 - FOODS: PERISHABLE\n393 - FOODS: STAPLE GROCERY AND GROCER’S MISCELLANEOUS ITEMS\n\n\n# Import MWBE directories, keep data of interest and make capital\nmwbe_ny &lt;- read_csv(\"data_raw/Directory_2025-05-30_862.csv\", \n                    skip = 5) %&gt;% \n  clean_names() %&gt;%\n  select(company_name) %&gt;% \n  mutate(company_name = str_to_upper(company_name))\n\nmwbe_nyc &lt;- read_xlsx(\"data_raw/OnlineDirectory06042025.xlsx\", \n                      skip = 6) %&gt;% \n  clean_names() %&gt;% \n  mutate(company_name = str_to_upper(vendor_formal_name)) %&gt;% \n  select(company_name)\n\n# Join data (convert to UTF-8 format in order to join)\nmwbe &lt;- full_join(mwbe_ny, mwbe_nyc) %&gt;% \n  mutate(mwbe = 1, \n         company_name = iconv(company_name, from = \"\", to = \"UTF-8\"))\n\nrm(mwbe_ny, mwbe_nyc)\n\n# Join with other data so see if overlap\nfuzzy_match &lt;- fuzzyjoin::stringdist_inner_join(df, mwbe, \n                                       by = \"company_name\",\n                                       max_dist = 0.05, \n                                       method = \"jw\")\nfuzzy_match &lt;- fuzzy_match %&gt;% \n  select(company_name.x, company_name.y)\n\n# Drop those matches that are wrong and keep only data of interest\nfuzzy_match &lt;- fuzzy_match %&gt;% \n  filter(\n    !company_name.x %in% c(\n      \"MARATHON ENTERPRISES, INC.\",\n      \"2002 TRUCKING INC.\",\n      \"AMO TRUCKING LLC\", \n      \"EJL TRUCKING LLC\", \n      \"FMM TRUCKING LLC\", \n      \"JLA TRUCKING LLC\", \n      \"JML TRUCKING LLC\", \n      \"JMM TRANSPORTATION CORP\", \n      \"JNL TRUCKING LLC\", \n      \"JSA TRUCKING LLC\", \n      \"JSD TRUCKING LLC\", \n      \"JSF TRUCKING LLC\", \n      \"SBM TRUCKING LLC\", \n      \"SFM TRUCKING LLC\", \n      \"SM TRUCKING, LLC\", \n      \"SMS TRUCKING LLC\", \n      \"WDS TRUCKING LLC\", \n      \"JOEY TRANSPORTATION LLC\", \n      \"LAHR CONSTRUCTION CORP.\")) %&gt;% \n  rename(company_name = company_name.x) %&gt;% \n  distinct(company_name)\n      \n# Create a list of mwbe businesses and use that to add mwbe to df\nmwbe_list &lt;- fuzzy_match %&gt;% \n  pull(company_name)\n\ndf &lt;- df %&gt;% \n  mutate(\n    mwbe = case_when(\n      company_name %in% mwbe_list ~ 1, \n      TRUE ~ mwbe))\n\n\n\n2.3.7.4 Save\nThe list of businesses we have here is a complete list of all businesses in the supply chain, but key information is missing and must be found manually.\nWe assume that any business that sells through the local supply chain (i.e., was interviewed by June, sold to NYC previously, or was part of the list of businesses that are NY Grown & Certified) should be part of the main part of our model. For this set of businesses, we gather additional information manually. All other businesses are in the model, but not explicitly modeled.\n\n# Create separate spreadsheets for beans data inside the model and outside the model\ndf_beans &lt;- df %&gt;% \n  filter(wholesaler_distributor==1 | beans_processor==1)\n    \ndf_beans_inside_model &lt;- df_beans %&gt;% \n  filter(lrfs_business==1 | outofstate_business==1 | sold_to_NYC==1)\n\ninside_list &lt;- df_beans_inside_model %&gt;% \n  pull(company_name)\n\ndf_beans_outside_model &lt;- df_beans %&gt;% \n  filter(!company_name %in% inside_list)\n\n# Create a new df for leafy greens and beef processors\ndf_leafygreens &lt;- df %&gt;% \n  filter(leafy_greens_processor==1 & beans_processor==0)\n\ndf_beef &lt;- df %&gt;% \n  filter(beef_processor==1 & beans_processor==0)\n\n## Add worksheets\naddWorksheet(wb, \"beans_inside_model\")\nwriteData(wb, \"beans_inside_model\", df_beans_inside_model)\naddWorksheet(wb, \"beans_outside_model\")\nwriteData(wb, \"beans_outside_model\", df_beans_outside_model)\n\naddWorksheet(wb, \"leafy_greens_processor\")\nwriteData(wb, \"leafy_greens_processor\", df_leafygreens)\naddWorksheet(wb, \"beef_processor\")\nwriteData(wb, \"beef_processor\", df_beef)\n\naddWorksheet(wb, \"all_data\")\nwriteData(wb, \"all_data\", df)\n\n# Add info\ninfo &lt;- tibble(\n  sheet_name = c(\"beans_inside_model\", \"beans_outside_model\", \n                 \"leafy_greens_processor\", \"beef_processor\"), \n  description = c(\n    \"processor, wholesale and distributions businesses that could process/sell beans or do sell beans and are assumed to be inside the model. Data is manually added to this list of businesses\",\n    \"processor, wholesale and distributions businesses that could process/sell beans or do sell beans and are assumed to be outside the model\",\n    \"processor businesses that could or do process leafy greens\",\n    \"processor businesses that could or do process beef\"),\n  data_source = \"Simply Analytics, New York City purchasing data, interview data, NY Grown and Certified\",\n  notes = \"We combined data from all sources to make one list of the supply chain businesses\")\n\n# Add metadata\nmeta &lt;- tibble(\n  variable_name = c(\n    \"company_name\", \"ny\", \"beans/beef/lettuce processor\",\n    \"wholesaler_distributor\", \"primary_processor\", \n    \"secondary_processor\", \"aggregator_cleaner\",\n    \"sold_to_nyc\", \"mwbe\", \"lrfs_business\", \"outofstate_business\",\n    \"nyc_dashboard\", \"simply_analytics\", \"interview_data\", \n    \"all_other\"), \n  variable_description = c(\n    \"Company name\", \"Location (1 in NY, 0 not in NY)\", \n    \"Beans/beef/lettuce processor (based on NAICS code in the Simply Analytics data and the origin detail from the NYC data)\",\n    \"Wholesaler/distributor\", \n    \"Primary processor of beans (only available in the interview data)\", \n    \"Secondary processor of beans (only available in the interview data)\",\n    \"Aggregator/cleaner (only available in the interview data)\", \n    \"Business has sold to New York City (we assume all businesses listed in the NYC data sold to NYC and all others did not)\",\n    \"MWBE business (1 is yes and 0 is no) based on interviews, NYC data and matched with the city and state MWBE\", \n    \"Works with local farms (1 is yes, 0 is no) (all businesses that were interviewed or included in the NY Certified and Grown have a 1 and all others 0)\",\n    \"Businesses that are part of the bean supply chain and located outside of NYC, data gathered by June from the NYC purchasing data in 2023\",\n    \"Data collected from the NYC dashboard (1 is yes 0 is no)\", \n    \"Data collected from Simply Analytics (1 is yes 0 is no)\", \n    \"Data collected from interviews (1 is yes 0 is no)\",\n    \"All other variables that were included in each of the data sets, can be used to determine inventory capacity and/or multiple commodities as we do not have that information\"))\n    \n# Add worksheets\naddWorksheet(wb, \"info\")\nwriteData(wb, \"info\", info)\n\naddWorksheet(wb, \"metadata\")\nwriteData(wb, \"metadata\", meta)\n\n# Save\nsaveWorkbook(wb, \"data_final/supply_chain_list.xlsx\", overwrite = TRUE)\n\n\n\n\n2.3.8 Manual data additions\nIn this file we take the data that was first complied in “processor_data.qmd”, exported and then manually added to in the document “CFP_Supply_Chain_Data_070425.xlsx.” We use the sheet “beans_inside_model” which indicates the wholesalers and distributors in the bean supply chain that we assume are “inside the model” and all actors in our agent based model. These entities have previously sold to NYC, have sales through local and regional food systems, or were indicated by the qualitative team to be outside of New York but a player in the system.\nIn the manual data piece, there were general notes made. Observations were dropped if they did not have any bean products or if they were deemed an incorrect entry.\nThere are a few errors in the data regarding operations that are located in NY or not, those are fixed. We are also missing address information which we need for some of the model calculations. These are added manually.\n\nlibrary(tidyverse)\nlibrary(janitor)\n\ndf &lt;- readxl::read_xlsx(\"data_processed/CFP_Supply_Chain_Data_070425.xlsx\", \n                        sheet = \"beans_inside_model\", \n                        skip = 1) %&gt;% \n  clean_names()\n\n# make beans_processor numeric (one entry had a ?)\ndf &lt;- df %&gt;% \n  mutate(\n    beans_processor = as.numeric(beans_processor)\n      )\n\n# Keep columns of interest\ndf &lt;- df %&gt;% \n  select(location, company_name, ny, beans_processor,\n         wholesaler_distributor, primary_processor:interview_data,\n         sales_volume, total_employees, local_employees,\n         locally_owned\n         )\n\n\n2.3.8.1 Drop data\nThe Bush’s Best data do not appear to be correct. There are no beans processed near New York.\nThere are a few businesses that process food for US foods or Sysco under different labels. I was not able to find any address information for these businesses so they are dropped.\nMETRO COMMODITIES is permanently closed so dropped.\nIf I wasn’t able to find an address, then the business was dropped.\nThere were multiple entries for Furmano’s so we only kept one.\n\n# Drop rows with no data\ndf &lt;- df %&gt;% \n  filter(!is.na(company_name) & \n           company_name != \"Unknown\")\n\n# Drop data defined as bad data or no beans or no information\ndf &lt;- df %&gt;% \n  filter(!company_name %in% c(\n    \"BGAN, CANADA\",\n    \"DEL PASADO\",\n    \"BROWN'S BEST\",\n    \"CARDINAL FOODS\",\n    \"CARLSTAD, NJ\", \n    \"FOODCO\", \n    \"FRESH AND TASTY BAKED PRODUCTS\", \n    \"HANOVER, HANOVER, PA\",\n    \"HANOVER, HOUSTON, TX\", \n    \"RANCHER'S BEST WHOLESALE MEATS INC.\", \n    \"SECAUCUS, NEW JERSEY\", \n    \"SECAUCUS, NJ\",\n    \"SUNFIELD, CHINA\", \n    \"TONY'S FISH & SEAFOOD CORP.\", \n    \"WESTSIDE FOODS\", \n    \"ZAITOON CORP\", \n    \"DEPEW DAIRY\", \n    \"G AND C FOOD SERVICE\",\n    \"GENECCO PRODUCE, INC.\", \n    \"GIANFORTE FARMS\", \n    \"GILETTE CREAMERY\", \n    \"HILLCREST FOODS\", \n    \"HUDSON DAIRY\",\n    \"HUFF\", \n    \"LATREMORE PINE RIDGE FARM\", \n    \"LUCKI7 LIVESTOCK COMPANY\",\n    \"MARINA ICE CREAM CORP\", \n    \"MCMAHONS FARM\", \n    \"MERCERS DAIRY\", \n    \"MORNING STAR POULTRY\", \n    \"RIVIERA PRODUCE\", \n    \"RUSSO PRODUCE CO.\", \n    \"SELF DISTRIBUTE - SFOGLINI\", \n    \"SLATE FOODS\", \n    \"SMITH PACKING COMPANY INC.\", \n    \"STEWARTS SHOPS CORP.\", \n    \"SYSCO\", \n    \"UPSTATE FARMS\", \n    \"UPSTATE NIAGARA COOPERATIVE INC.\", \n    \"WARDYNSKI & SONS INC.\", \n    \"AMERICAN FRUIT AND VEGETABLE CO.\", \n    \"BARTLETT DAIRY\",\n    \"BEHLOG & SONS PRODUCE\",\n    \"BEST CHOICE\", \n    \"BIPPERTS\", \n    \"BRIGIOTTAS FARMLAND PRODUCE\", \n    \"BURLY BROTHERS COUNTRY BUTCHERY\",\n    \"BUSH BROTHERS & CO / BUSHS BEST, CHAMBERSBURG, PA\",\n    \"BUSHS BEST, BEAR, DE\", \n    \"CASACLS\", \n    \"CATSKILLS AGRARIAN ALLIANCE (607CSA)\", \n    \"COMFORT FOOD\", \n    \"CULINARY SELECT, BETHLEHEM, PA\",\n    \"DEL PASADO, MEMPHIS, TN\", \n    \"DEL PASADO, NORTHUMBERLAND, PA\", \n    \"FURMANO FOODS INC / FURMANOS, NORTHUMBERLAND, PA\", \n    \"FURMANO'S, NORTHUMBERLAND, PA\",\n    \"FURMANO\",\n    \"FURMANOS\",\n    \"GOLDEN BAY FOODS LLC / MONARCH, JERSEY CITY, NJ\", \n    \"GOLDEN PLATTER\", \n    \"HAN/FURM\", \n    \"HOUSE FOODS\", \n    \"METRO COMMODITIES\", \n    \"MONARCH, WESTFIELD, MA\", \n    \"MULTIPLE SOURCES / RYKOFF SEXTON, SOUTH BRUNSWICK, NJ\",\n    \"NASOYA FOODS USA LLC / NASOYA, ALLENTOWN, PA\", \n    \"NATURESOY\", \n    \"SYS CLS\"\n    )\n  )\n\n\n\n2.3.8.2 Add address\nHere we manually add addresses and fix issues with the ny variable.\nFor companies with multiple locations, I just chose one.\n\n## Add address\ndf &lt;- df %&gt;% \n  mutate(\n    address = case_when(\n      company_name == \"ACE ENDICO\" ~ \"80 International Boulevard Brewster, NY 10509\", \n      company_name==\"BELLA VISTA\" ~ \"770 Cannery Road, Northumberland, PA 17857\", \n      company_name==\"CARDINAL FOODS\" ~ \"130 Grand Street, Carlstadt, NJ 07072\", \n      company_name==\"CHEF'S CHOICE CASH & CARRY FOOD DISTRIBUTOR INC\" ~ \"051 Utica Ave, Brooklyn, NY 11203\",\n      company_name==\"CHEF'S ORCHID RESTAURANT\" ~ \"248-05 Union Turnpike\nBellerose, NY 11426\", \n      company_name==\"DRISCOLL FOODS FOOD SERVICE / METROPOLITAN FOODS INC.\" ~ \"6 Westbelt, Wayne, NJ 07470\", \n      company_name==\"FOODCO\" ~ \"1014 Vine Street Cincinnati, OH 45202\", \n      company_name==\"NASOYA ORGANIC, USA\" ~ \"1 New England Way Ayer, MA 01432\", \n      company_name==\"NEW YORK BEAN, LLC\" ~ \"2905 Caledonia‐Leroy Rd, Caledonia, NY 14423\", \n      company_name==\"R&L GOODS DIST INC.\" ~ \"1123 49th Street, Brooklyn, NY 11219\", \n      company_name==\"RESTAURANT DEPOT\" ~ \"566 Hamilton Ave, Brooklyn, NY 11232\", \n      company_name==\"TERI NICHOLS\" ~ \"10101 C Avenue D, Brooklyn, NY 11236\",\n      company_name==\"THE CHEF'S KINGDOM\" ~ \"1 Alpine Ct, Spring Valley, NY 10977\", \n      company_name== \"US FOODS\" ~ \"9399 W Higgins Rd Ste 100, Rosemont, IL 60018\", \n      company_name==\"DICARLO FOODS\" ~ \"1630 N Ocean Ave, Holtsville, NY 11742\", \n      company_name == \"DRISCOLL FOODS - METRO NY\" ~ \"6 Westbelt\nWayne, NJ 07470\", \n      company_name ==\"DRISCOLL FOODS - UPSTATE NY (AMSTERDAM)\" ~ \"105 Quist Rd, Amsterdam, NY 12010\", \n      company_name==\"DUSO FOOD DISTRIBUTORS INC.\" ~ \"6055 Route 52, Ellenville, NY 12428\", \n      company_name == \"FERARRO FOODS\" ~ \"80 Wilshire Blvd Edgewood NY 11717\", \n      company_name== \"GINSBERGS FOODS\" ~ \"29 Ginsbergs Rd, Hudson, NY 12534\", \n      company_name==\"HEADWATER FOOD HUB\" ~ \"6318 Ontario Center Rd, Ontario, NY 14519\",\n      company_name==\"HUB ON THE HILL\" ~\"6700 Main St, Westport, NY 12993\", \n      company_name==\"HUDSON HARVEST\" ~ \"1931 US-9, Germantown, NY 12526\", \n      company_name==\"J. KINGS FOODSERVICE PROFESSIONALS\" ~ \"700 Furrows Rd, Holtsville, New York 11742\", \n      company_name==\"JACOBSTEIN FOOD SERVICE\" ~ \"15 Airline Dr. Rochester, NY 14624\", \n      company_name==\"LATINA BOULEVARD\" ~ \"1 Scrivner Dr Suite #1, Buffalo, NY 14227\", \n      company_name==\"MAPLEVALE\" ~ \"2063 Allen St Ext, Falconer, NY 14733\", \n      company_name==\"MIVILA FOODS\" ~ \"347 Burman Blvd, Calverton, NY 11933\", \n      company_name==\"PERFORMANCE FOOD SERVICE METRO\" ~ \"1 Ikea Drive\nElizabeth, NJ 07207\", \n      company_name==\"RED BARN PRODUCE\" ~ \"217 Upper North Road, Highland NY 12528\", \n      company_name==\"REGIONAL ACCESS\" ~ \"1609 Trumansburg Rd, Ithaca, NY 14850\", \n      company_name==\"RENZI FOODSERVICE\" ~ \"901 Rail Drive Watertown, NY 13601\", \n      company_name==\"SCHRIER FOODSERVICE\" ~ \"4901 Gleenwood Road, Brooklyn, NY 11234\",\n      company_name==\"SYSCO ALBANY\" ~ \"1 Liebich Lane Halfmoon, NY 12065\", \n      company_name==\"SYSCO LONG ISLAND\" ~\"199 Lowell Avenue Central Islip, NY 11722\", \n      company_name==\"SYSCO METRO NY\" ~ \"20 Theodore Conrad Drive Jersey City, NJ 07305\", \n      company_name==\"SYSCO SYRACUSE\" ~ \"2508 Warners Road Warners, NY 13164\", \n      company_name==\"THE HUDSON MILK COMPANY\" ~ \"1000 N Division St, Peekskill, NY 10566\", \n      company_name==\"THURSTON FOODS\" ~ \"30 Thurston Dr, Wallingford, CT 06492\", \n      company_name==\"US FOODS ALBANY\" ~\"755 Pierce Rd, Clifton Park, NY 12065\", \n      company_name==\"US FOODS BUFFALO\" ~ \"125 Gardenville Parkway West\nBuffalo, NY 14224\", \n      company_name==\"AIR STREAM FOODS\" ~ \"3400 Lawson Blvd, Oceanside, NY 11572\", \n      company_name==\"AMERICAN ROLAND FOOD CO / ROLAND, DAYTON, NJ\" ~ \"1 Industrial Rd Suite 199, Dayton, NJ 08810\", \n      company_name==\"ANTONNUCI FOODS\" ~\"274 S Main St, Gloversville, NY 12078\", \n      company_name==\"BALDOR FOODS\"  ~\"155 Food Center Dr, The Bronx, NY 10474\", \n      company_name==\"BIG APPLE DELI PRODUCTS\" ~ \"150 Fedex Way, Rochester, NY 14624\", \n      company_name==\"CHEF'S LINE\" ~ \"2255 High Hill Rd. Bridgeport, NJ 08014\", \n      company_name==\"CHEFS WAREHOUSE\" ~ \"240 Food Center Dr, Bronx, NY 10474\", \n      company_name==\"CURTZE FOOD\" ~ \"1717 E 12th St, Erie, PA 16511\",\n      company_name==\"DAGELE BROTHERS PRODUCE\" ~ \"40 Stream Dr, Florida, NY 10921\", \n      company_name==\"DR PRAEGER\" ~ \"9 Boumar Place, Elmwood Park, NJ 07407\", \n      company_name==\"FILLO FACTORY INC.\"  ~\"10 Fairway Ct, Northvale, NJ 07647\", \n      company_name==\"FURMANO FOODS\" ~\"770 Cannery Rd, Northumberland, PA 17857\", \n      company_name==\"GENESEE VALLEY BEAN CO\" ~ \"4194 Cameron Rd, Caledonia, NY 14423\", \n      company_name==\"HANOVER FOODS\" ~ \"1125 Wilson Avenue, Hanover, PA 17331\", \n      company_name==\"HUDSON  HARVEST\" ~\"1931 US-9, Germantown, NY 12526\", \n      company_name==\"MATRIARK FOODS\" ~ \"246 5th Ave, New York, NY 10001\", \n      company_name==\"QAULI-PACK USA\" ~ \"1 Market St # 7, Passaic, NJ 07055\", \n      company_name==\"RIVERHEAD BEAN COMPANY\" ~ \"485-17 South Broadway Hicksville, NY 11801\",\n      company_name==\"ROLAND FOODS\" ~ \"115 W 18th St Floor 5, New York, NY 10011\", \n      company_name==\"SENECA GRAIN AND BEAN\" ~ \"1333 Nutt Rd, Penn Yan, NY 14527\", \n      company_name==\"TRINIDAD BENHAM CORP / JACK RABBIT, LA VERGNE, TN\" ~ \"140 International Blvd, La Vergne, TN 37086\", \n      company_name==\"UNI-PAC\" ~\"111 Coolidge St, South Plainfield, NJ 07080\", \n      company_name==\"VERMONT BEAN CRAFTERS\" ~ \"284 Vermont Rte 100, Warren, VT 05674\", \n      company_name==\"WILD KALE\" ~ \"211 N End Ave New York, NY 10282\", \n      TRUE ~ location) \n  )\n\n\n# Make sure ny variable is correct\ndf &lt;- df %&gt;% \n  mutate(\n    ny = case_when(\n      str_detect(address, \"NY|New York\") ~ 1, \n      TRUE ~ 0)\n    )\n\n# Keep full address and drop location\ndf &lt;- df %&gt;% \n  select(address, everything()) %&gt;% \n  select(-location)\n\n\n2.3.8.2.1 Geocode\n\nlibrary(tidygeocoder)\n\n# Geocode\ndf &lt;- df %&gt;%\n  geocode(address, \n          method = 'census', \n          lat = latitude, \n          long = longitude,\n          full_results = FALSE)\n\n# Manually fix those missing\nmissing &lt;- df %&gt;% \n  filter(is.na(latitude))\n\n\n# Fix missing\ndf &lt;- df %&gt;% \n  mutate(\n    latitude = case_when(\n      company_name==\"GOYA\" ~ 40.763031, \n      company_name==\"NEW YORK BEAN, LLC\" ~ 42.976151, \n      company_name==\"R & L FOOD, CANADA\" ~ 45.412021, \n      company_name==\"WHITSONS CULINARY GROUP\" ~ 40.852589, \n      company_name==\"GINSBERGS FOODS\" ~ 42.2662037,\n      company_name==\"THURSTON FOODS\" ~ 41.4783847,\n      company_name==\"AMERICAN ROLAND FOOD CO / ROLAND, DAYTON, NJ\" ~ 40.3747341, \n      company_name==\"CHEF'S LINE\" ~ 39.7808195, \n      TRUE ~ latitude), \n    longitude = case_when(\n      company_name==\"GOYA\" ~ -74.068359, \n      company_name==\"NEW YORK BEAN, LLC\" ~ -77.870369, \n      company_name==\"R & L FOOD, CANADA\" ~ -75.652283, \n      company_name==\"WHITSONS CULINARY GROUP\" ~ -73.390443, \n      company_name==\"GINSBERGS FOODS\" ~ -73.731335,\n      company_name==\"THURSTON FOODS\" ~ -72.7998233,\n      company_name==\"AMERICAN ROLAND FOOD CO / ROLAND, DAYTON, NJ\" ~ -74.4907604, \n      company_name==\"CHEF'S LINE\" ~ -75.3660808, \n      TRUE ~ longitude)\n    )\n\n# Re-order\ndf &lt;- df %&gt;% \n  select(latitude, longitude, everything())\n\n\n\n2.3.8.2.2 Save\n\nwrite_csv(df, \"data_final/beans_processor_distributor.csv\")",
    "crumbs": [
      "Dry beans",
      "<span class='chapter-number'>2</span>  <span class='chapter-title'>Data inputs</span>"
    ]
  },
  {
    "objectID": "drybeans/data_inputs.html#markets",
    "href": "drybeans/data_inputs.html#markets",
    "title": "2  Data inputs",
    "section": "2.4 Markets",
    "text": "2.4 Markets",
    "crumbs": [
      "Dry beans",
      "<span class='chapter-number'>2</span>  <span class='chapter-title'>Data inputs</span>"
    ]
  },
  {
    "objectID": "drybeans/data_inputs.html#consumption",
    "href": "drybeans/data_inputs.html#consumption",
    "title": "2  Data inputs",
    "section": "2.5 Consumption",
    "text": "2.5 Consumption",
    "crumbs": [
      "Dry beans",
      "<span class='chapter-number'>2</span>  <span class='chapter-title'>Data inputs</span>"
    ]
  },
  {
    "objectID": "drybeans/data_inputs.html#institutional-purchasing-in-new-york-state",
    "href": "drybeans/data_inputs.html#institutional-purchasing-in-new-york-state",
    "title": "2  Data inputs",
    "section": "2.6 Institutional purchasing in New York State",
    "text": "2.6 Institutional purchasing in New York State\nWe use data from NYC Food Policy, Good Food Purchasing data from 2019-2023, we download the full purchasing data set.\nWe provide average and standard deviation for price per lb. and kg. for dry beans by form (canned, dried, frozen), and by agency from 2019-2023. We drop data points where the price is more than two standard deviations outside of the average price.\n\n2.6.1 Import data\nHere we import data and define variables.\n\nlibrary(tidyverse)\nlibrary(readxl)\nlibrary(openxlsx)\nlibrary(knitr)\nlibrary(kableExtra)\n\n# create workbook\nwb &lt;- createWorkbook()\n\n# Import data\ndf &lt;- read_xlsx(\"data_raw/Public-Dashboard-Data-for-Download-FY19-23.xlsx\", \n                sheet = \"Citywide\")\n\n# Keep bean data only\ndf &lt;- df %&gt;% \n  filter(`Food Product Category`==\"Legumes\" &\n           str_detect(`Product Name`, \"bean\")) \n\n# Define form\ndf &lt;- df %&gt;% \n  mutate(Form = case_when(\n    str_detect(`Product Type`, \"10 \") ~ \"Canned\",\n    str_detect(`Product Type`, \"CANS|CND\") ~ \"Canned\",\n    str_detect(`Product Type`, \"CANNED\") ~ \"Canned\",\n    str_detect(`Product Name`, \"canned\") ~ \"Canned\",\n      str_detect(`Product Type`, \"FRZN\") ~ \"Frozen\",\n    TRUE ~ \"Dried\"))\n\n# Convert lbs. to kgs.\ndf &lt;- df %&gt;% \n  mutate(\n    `Total Weight in kgs` = `Total Weight in lbs` * 0.45359237\n  )\n\n# Define price per kg\ndf &lt;- df %&gt;% \n  mutate(\n    `Price per kg` = `Total Cost`/`Total Weight in kgs`\n  )\n\n# Define price per lb\ndf &lt;- df %&gt;% \n  mutate(\n    `Price per lb` = `Total Cost`/`Total Weight in lbs`\n  )\n\n# Define a dummy for if the product was eligible for a price premium (MWBE and/or local)\ndf &lt;- df %&gt;% \n  mutate(\n    premium = case_when(\n      `MWBE y/n`==\"Y\" | \n        `NY State spend y/n`==\"Y\" ~ 1, \n      TRUE ~ 0)\n    )\n\n\n\n2.6.2 Understand missing total weight data\nThe missing data does have the number of units, but does not have weight in lbs. We can use the information provided about the product and estimate how much the product weighed and estimate a total weight.\nDepartment of Education has a large purchase that lists number of unit. Units are #10 cans, we assume they each weight 6 lbs 15 oz (111 oz).\nFor now, we are not going to take this step, but can in the future if needed.\n\n# Missing data\nmissing &lt;- df %&gt;% \n  filter(`Total Weight in lbs`==0)\n\n# Zero lbs. but positive price\ntesting &lt;- df %&gt;% \n  mutate(\n    zero_lbs = case_when(\n      `Total Weight in lbs`==0 ~ 1, \n      TRUE ~ 0)\n    ) %&gt;% \n  group_by(Agency, `Time Period`, zero_lbs) %&gt;% \n  count()\n  \nrm(missing, testing)\n\n\n\n2.6.3 Summary\nRemoved outliers that were more than 2 standard deviations from the mean based on price per pound, within agency, year, and form. We dropped 17 observations (397 down to 380).\nData are pulled for purchases with no attributes that would allow for a higher price (i.e., not MWBE, not purchased from New York). Because we will run the model with different scenarios related to local and MWBE, the data of interest are the bean purchases of non-local and non-MWBE products (i.e., no premium, defined as NY State spend y/n==N and MWBE y/n == N). Note there are no purchases of beans from MWBE businesses in the data.\nFull set of summary statistics includes mean and standard deviation of price per lb. and per kg. by year, agency, and form (canned, dried).\n\n# Drop data without a weight\ndf &lt;- df %&gt;% \n  filter(\n    `Total Weight in lbs`!=0)\n\n# Remove outliers that are more than 2 SD from the mean\ndf &lt;- df %&gt;% \n  group_by(Agency, `Time Period`, Form) %&gt;% \n  mutate(\n    mean_lb = mean(`Price per lb`, na.rm = TRUE), \n    sd_lb = sd(`Price per lb`, na.rm = TRUE)\n  ) %&gt;%\n  mutate(\n    outlier = case_when(\n      `Price per lb` &lt; mean_lb - 2*sd_lb |  \n        `Price per lb` &gt; mean_lb + 2*sd_lb ~ 1, \n      TRUE ~ 0)\n    ) %&gt;% \n  filter(outlier==0) %&gt;%\n  ungroup() %&gt;% \n  select(-mean_lb, -sd_lb)\n \n# Drop purchases that are local (note there are no MWBE businesses)\ndf &lt;- df %&gt;% \n  filter(`NY State spend y/n`==\"N\")\n  \n# Summary stats with outliers removed \nsum &lt;- df %&gt;% \n  group_by(Agency, `Time Period`, Form) %&gt;% \n  summarise(\n    mean_lb = mean(`Price per lb`, na.rm = TRUE), \n    sd_lb = sd(`Price per lb`, na.rm = TRUE), \n    mean_kg = mean(`Price per kg`, na.rm = TRUE), \n    sd_kg = sd(`Price per kg`, na.rm = TRUE),\n    n = n()\n  ) %&gt;% \n  ungroup()\n\n# Add worksheet\naddWorksheet(wb, \"NYC_bean_purchasing\")\nwriteData(wb, \"NYC_bean_purchasing\", sum)\n\n# Info\ninfo &lt;- tibble(\n  sheet_name = c(\n    \"NYC_bean_purchasing\"), \n  description = c(\n    \"Mean and standard deviation of price/lb. and price/kg. for beans by agency, year, and form (e.g, dried, canned, frozen)\", \n  source = \"NYC dashboard\", \n  url = \"https://www.nyc.gov/site/foodpolicy/good-food-purchasing/citywidedata.page\",\n  notes = \"Includes only purchases from outside of New York and not from MWBE businesses (i.e., no premiums associated with local/MWBE attributes included in the data).\")\n)\n\n# Add Worksheet\naddWorksheet(wb, \"info\")\nwriteData(wb, \"info\", info)\n\n# Save \nsaveWorkbook(wb, \"data_final/NYC_bean_purchasing.xlsx\", \n             overwrite = TRUE)\n\n\n# Keep data per lb. and for 2022 only\ntable &lt;- sum %&gt;% \n  filter(`Time Period`==2022) %&gt;%\n  select(-c(`Time Period`, mean_kg:last_col())) %&gt;% \n  mutate(\n    sd_lb = case_when(\n      is.na(sd_lb) ~ 0, \n      TRUE ~ sd_lb\n  )) %&gt;% \n  rename(\n    Mean = mean_lb, \n    SD = sd_lb\n  ) \n\ntable %&gt;% \n  kable(\n    digits = 2, \n    caption = '&lt;span style=\"color: black; font-size: 18px; font-weight: bold;\"&gt;Price per pound for dried and canned beans purchased by New York City in 2022&lt;/span&gt;') %&gt;%\n  kable_styling()",
    "crumbs": [
      "Dry beans",
      "<span class='chapter-number'>2</span>  <span class='chapter-title'>Data inputs</span>"
    ]
  },
  {
    "objectID": "drybeans/data_inputs.html#lca",
    "href": "drybeans/data_inputs.html#lca",
    "title": "2  Data inputs",
    "section": "2.7 LCA",
    "text": "2.7 LCA\nJasmine and Elsie add.",
    "crumbs": [
      "Dry beans",
      "<span class='chapter-number'>2</span>  <span class='chapter-title'>Data inputs</span>"
    ]
  },
  {
    "objectID": "drybeans/model_parameterization.html",
    "href": "drybeans/model_parameterization.html",
    "title": "3  Model parameterization",
    "section": "",
    "text": "3.1 Supply Chain Data\nClick on a node of the supply chain to link to the data used in the model for each location along the supply chain.",
    "crumbs": [
      "Dry beans",
      "<span class='chapter-number'>3</span>  <span class='chapter-title'>Model parameterization</span>"
    ]
  },
  {
    "objectID": "drybeans/model_parameterization.html#estimated-margins",
    "href": "drybeans/model_parameterization.html#estimated-margins",
    "title": "3  Model parameterization",
    "section": "3.2 Estimated margins",
    "text": "3.2 Estimated margins",
    "crumbs": [
      "Dry beans",
      "<span class='chapter-number'>3</span>  <span class='chapter-title'>Model parameterization</span>"
    ]
  },
  {
    "objectID": "drybeans/agent_behavior_decisions.html",
    "href": "drybeans/agent_behavior_decisions.html",
    "title": "4  Agent behavior and decision making",
    "section": "",
    "text": "4.1 How base agents respond to requests with offers",
    "crumbs": [
      "Dry beans",
      "<span class='chapter-number'>4</span>  <span class='chapter-title'>Agent behavior and decision making</span>"
    ]
  },
  {
    "objectID": "drybeans/agent_behavior_decisions.html#scoring-incoming-requests-for-product-in-the-model",
    "href": "drybeans/agent_behavior_decisions.html#scoring-incoming-requests-for-product-in-the-model",
    "title": "4  Agent behavior and decision making",
    "section": "4.2 Scoring incoming requests for product in the model",
    "text": "4.2 Scoring incoming requests for product in the model",
    "crumbs": [
      "Dry beans",
      "<span class='chapter-number'>4</span>  <span class='chapter-title'>Agent behavior and decision making</span>"
    ]
  },
  {
    "objectID": "drybeans/model_validation.html",
    "href": "drybeans/model_validation.html",
    "title": "5  Model validation",
    "section": "",
    "text": "5.1 Estimated margins",
    "crumbs": [
      "Dry beans",
      "<span class='chapter-number'>5</span>  <span class='chapter-title'>Model validation</span>"
    ]
  },
  {
    "objectID": "drybeans/model_outputs.html",
    "href": "drybeans/model_outputs.html",
    "title": "6  Model outputs",
    "section": "",
    "text": "6.1 Overall Impact\nComprehensive view across selected impact categories for the NYC Food Policy Action, Definition, and Implementation Scenario relative to the Business as Usual baseline. The figure shows the status of food system impact across four broad dimensions: NYC agency impact (defined by the indicators “total cost to NYC”, “total number of contracted vendors”, and “total number of new vendors”), Environmental Impact . All impacts are presented relative to Business As Usual (a modeled depiction of what NYC is currently purchasing), which is represented by the black dotted line on the edge of the circle.",
    "crumbs": [
      "Dry beans",
      "<span class='chapter-number'>6</span>  <span class='chapter-title'>Model outputs</span>"
    ]
  },
  {
    "objectID": "drybeans/model_outputs.html#nyc-agency-impact",
    "href": "drybeans/model_outputs.html#nyc-agency-impact",
    "title": "6  Model outputs",
    "section": "6.2 NYC Agency Impact",
    "text": "6.2 NYC Agency Impact\nNYC has a primary responsibility to purchase and serve food to more than 1 million residents daily. The decisions it makes about what food to procure and how to procure it can impact how much the city (tax payers) spend on food. Here we use the following indicators to understand the impact to NYC:\n\nNumber of Contracts (absolute): Number of businesses that have contracts with NYC by supply chain characteristic: (1) M/WBE (2) local.\nNumber of Contracts (% change from Business as Usual): The percent change in the number of businesses that have contracts with NYC (compared to Business As Usual) by supply chain characteristic: (1) M/WBE (2) local.\nAmount of Beans Purchased (absolute): Total quantity (100 kg) of products purchased by supply chain characteristic: (1) M/WBE, (2) organic, (3) local, or (4) small. This is measured in 100 kg of beans and based on the food policy action, definition, and implementation scenario that is selected.\nAmount of Beans Purchased (% change from Business as Usual): The percent change in the amount of beans purchased (compared to Business As Usual) by supply chain characteristic: (1) M/WBE, (2) organic, (3) local, or (4) small. This is measured as percent change from Business as Usual and compared to the food policy action, definition, and implementation scenario that is selected.\nAmount Spent on Beans (total): This is the total amount ($) spent on beans (including dried, canned, and processed) by NYC agencies, by supply chain characteristic: (1) M/WBE, (2) organic, (3) local, or (4) small. This is measured in dollars spent on beans by all NYC agencies and based on the food policy action, definition, and implementation scenario that is selected.\nAmount Spent on Beans (unit): This is the average amount ($) spent per pound of beans by NYC agencies, by supply chain characteristic: (1) M/WBE, (2) organic, (3) local, or (4) small, and based on its level of processing (e.g., dried bean, canned bean, processed bean). Units are displayed as price per pound (lb).",
    "crumbs": [
      "Dry beans",
      "<span class='chapter-number'>6</span>  <span class='chapter-title'>Model outputs</span>"
    ]
  },
  {
    "objectID": "drybeans/model_outputs.html#environmental-impact",
    "href": "drybeans/model_outputs.html#environmental-impact",
    "title": "6  Model outputs",
    "section": "6.3 Environmental Impact",
    "text": "6.3 Environmental Impact\nNYC has a number of ways that it tracks progress towards achieving its environmental sustainability goals. Those include but are not limited to: water quality impacts, global warming, and natural resource use. - Global warming (kg CO2 eq) / GHG emissions - Energy use/kg of food purchased (MJ) - Water quality (kg P eq) - Air quality - Land use and quality (m2 / year) - Materials used/kg of product - Erosion potential - Biodiversity impact - Certified organic acres (New York State): This indicator assesses the amount (acres) under certified organic production in New York State, wherein Business as Usual is compared to the selected Food Policy Action, Definition, and Implementation Scenario.",
    "crumbs": [
      "Dry beans",
      "<span class='chapter-number'>6</span>  <span class='chapter-title'>Model outputs</span>"
    ]
  },
  {
    "objectID": "drybeans/model_outputs.html#producer-impact",
    "href": "drybeans/model_outputs.html#producer-impact",
    "title": "6  Model outputs",
    "section": "6.4 Producer Impact",
    "text": "6.4 Producer Impact\nThere are several measures to track progress towards NYC’s local economy and valued workforce goals, many of which focus on the characteristics of the farms that grow or raise the products purchased by City agencies. This analysis examines how those policies affect New York State producers by tracking: (1) the number of producers with sales to NYC, (2) average yearly producer revenue from NYC agency contracts, (3) the share of producers’ sales going to NYC, and (4) changes in profitability for producers selling into the NYC market.\n\nProducers with NYC Agency Contracts: The number of producers with sales to NYC agencies, reported by supply chain characteristic: (1) M/WBE, (2) organic, (3) local, or (4) small. This indicator reflects the total count of participating producers, for the selected Food Policy Action, Definition, and Implementation Scenario compared to Business as Usual.\nAverage Yearly Producer Revenue from NYC Agency Contracts (average yearly revenue): This indicator estimates the average revenue that New York State producers receive from products ultimately purchased by NYC agencies. It is calculated by dividing the total dollar value of NYC purchases (by supply chain characteristic) by the number of New York State producers supplying those products, including sales that flow through supply chain intermediaries. The result represents an average dollar value per producer, reported by producer characteristic, and by the selected Food Policy Action, Definition, and Implementation Scenario compared to Business as Usual.\nAverage Yearly Producer Revenue from NYC Agency Contracts (% change from Business as Usual): This indicator estimates the average revenue that New York State producers receive from products ultimately purchased by NYC agencies. It is calculated by dividing the total dollar value of NYC agency purchases (by supply chain characteristic) by the number of New York State producers supplying those products, including sales that flow through intermediaries in the supply chain. Results are reported as the percent change from Business as Usual for the selected Food Policy Action, Definition, and Implementation Scenario.\nProducer reliance on NYC markets: The share of a producer’s gross cash farm income that comes from products ultimately purchased by NYC agencies. This indicator represents the NYC-purchased portion of farm sales, averaged across all farms involved in sales to NYC. Results are reported for Business as Usual, as well as the selected Food Policy Action, Definition, and Implementation Scenario.\nProducer profitability: Profitability of farms with positive sales to NYC agencies by supply chain characteristic: (1) M/WBE, (2) organic, (3) local, or (4) small.",
    "crumbs": [
      "Dry beans",
      "<span class='chapter-number'>6</span>  <span class='chapter-title'>Model outputs</span>"
    ]
  },
  {
    "objectID": "drybeans/model_outputs.html#economic-impact",
    "href": "drybeans/model_outputs.html#economic-impact",
    "title": "6  Model outputs",
    "section": "6.5 Economic Impact",
    "text": "6.5 Economic Impact\n\nNYS business relationships with NYC agencies (absolute): This indicator reflects the total number of supply chain stakeholders that have sale relationships with NYC agencies.\nNYS business relationships with NYC agencies (% change from Business as Usual): This indicator reflects the change in the total number of supply chain stakeholders that have sale relationships with NYC agencies for the selected Food Policy Action, Definition, and Implementation Scenario compared to Business as Usual.\nFood Dollar: Marketing bill: The food dollar, marketing bill, analyzes how an average $1 of purchases by NYC is distributed among raw food production (producer) and the portion that goes to food supply chain stakeholders. This is an indicator used by the U.S. Department of Agriculture’s Economic Research Service to describe different aspects of the food supply chain. Here we are interested in the effects of Food Policy Actions, Definition, and Implementation Scenario compared to Business as Usual.\nEconomic impact to New York State, regional multiplier effect\nJob creation, particularly in the food processing/manufacturing/distribution sector",
    "crumbs": [
      "Dry beans",
      "<span class='chapter-number'>6</span>  <span class='chapter-title'>Model outputs</span>"
    ]
  },
  {
    "objectID": "beef/beef.html",
    "href": "beef/beef.html",
    "title": "Beef",
    "section": "",
    "text": "Supply chain overview",
    "crumbs": [
      "Beef",
      "Beef"
    ]
  },
  {
    "objectID": "beef/beef.html#agricultural-production",
    "href": "beef/beef.html#agricultural-production",
    "title": "Beef",
    "section": "Agricultural production",
    "text": "Agricultural production\n\nFarm inputs and production costs",
    "crumbs": [
      "Beef",
      "Beef"
    ]
  },
  {
    "objectID": "beef/beef.html#processing",
    "href": "beef/beef.html#processing",
    "title": "Beef",
    "section": "Processing",
    "text": "Processing",
    "crumbs": [
      "Beef",
      "Beef"
    ]
  },
  {
    "objectID": "beef/beef.html#distribution",
    "href": "beef/beef.html#distribution",
    "title": "Beef",
    "section": "Distribution",
    "text": "Distribution",
    "crumbs": [
      "Beef",
      "Beef"
    ]
  },
  {
    "objectID": "beef/beef.html#markets",
    "href": "beef/beef.html#markets",
    "title": "Beef",
    "section": "Markets",
    "text": "Markets",
    "crumbs": [
      "Beef",
      "Beef"
    ]
  },
  {
    "objectID": "beef/beef.html#estimated-margins",
    "href": "beef/beef.html#estimated-margins",
    "title": "Beef",
    "section": "Estimated margins",
    "text": "Estimated margins",
    "crumbs": [
      "Beef",
      "Beef"
    ]
  },
  {
    "objectID": "beef/beef.html#consumption",
    "href": "beef/beef.html#consumption",
    "title": "Beef",
    "section": "Consumption",
    "text": "Consumption",
    "crumbs": [
      "Beef",
      "Beef"
    ]
  },
  {
    "objectID": "beef/beef.html#institutional-purchasing-in-new-york-state",
    "href": "beef/beef.html#institutional-purchasing-in-new-york-state",
    "title": "Beef",
    "section": "Institutional purchasing in New York state",
    "text": "Institutional purchasing in New York state",
    "crumbs": [
      "Beef",
      "Beef"
    ]
  },
  {
    "objectID": "greens/greens.html",
    "href": "greens/greens.html",
    "title": "Greens",
    "section": "",
    "text": "Supply chain overview",
    "crumbs": [
      "Greens",
      "Greens"
    ]
  },
  {
    "objectID": "greens/greens.html#agricultural-production",
    "href": "greens/greens.html#agricultural-production",
    "title": "Greens",
    "section": "Agricultural production",
    "text": "Agricultural production\n\nFarm inputs and production costs",
    "crumbs": [
      "Greens",
      "Greens"
    ]
  },
  {
    "objectID": "greens/greens.html#processing",
    "href": "greens/greens.html#processing",
    "title": "Greens",
    "section": "Processing",
    "text": "Processing",
    "crumbs": [
      "Greens",
      "Greens"
    ]
  },
  {
    "objectID": "greens/greens.html#distribution",
    "href": "greens/greens.html#distribution",
    "title": "Greens",
    "section": "Distribution",
    "text": "Distribution",
    "crumbs": [
      "Greens",
      "Greens"
    ]
  },
  {
    "objectID": "greens/greens.html#markets",
    "href": "greens/greens.html#markets",
    "title": "Greens",
    "section": "Markets",
    "text": "Markets",
    "crumbs": [
      "Greens",
      "Greens"
    ]
  },
  {
    "objectID": "greens/greens.html#estimated-margins",
    "href": "greens/greens.html#estimated-margins",
    "title": "Greens",
    "section": "Estimated margins",
    "text": "Estimated margins",
    "crumbs": [
      "Greens",
      "Greens"
    ]
  },
  {
    "objectID": "greens/greens.html#consumption",
    "href": "greens/greens.html#consumption",
    "title": "Greens",
    "section": "Consumption",
    "text": "Consumption",
    "crumbs": [
      "Greens",
      "Greens"
    ]
  },
  {
    "objectID": "greens/greens.html#institutional-purchasing-in-new-york-state",
    "href": "greens/greens.html#institutional-purchasing-in-new-york-state",
    "title": "Greens",
    "section": "Institutional purchasing in New York state",
    "text": "Institutional purchasing in New York state",
    "crumbs": [
      "Greens",
      "Greens"
    ]
  },
  {
    "objectID": "appendix/glossary.html",
    "href": "appendix/glossary.html",
    "title": "Glossary",
    "section": "",
    "text": "Here we put the glossary\n\nFood Policy Actions\nIn 2022, New York City formally established the Good Food Purchasing initiative, which guides City agencies in aligning food spending with six core values: nutrition, local economies, environmental sustainability, animal welfare, valued workforce, and transparency. These values shape how agencies design procurements, how vendors and supply chain stakeholders develop and price products, and how bids are evaluated and selected. The Food Policy Actions featured in this dashboard were identified in partnership with the Mayor’s Office of Food Policy. The first part of each Food Policy Action name reflects its Good Food Purchasing value alignment, while the second describes how New York City is advancing (or considering advancing) progress toward that value.\n\nBusiness As Usual\nBusiness as Usual represents our best estimate of current NYC purchasing practices for the selected commodities. It reflects what NYC agencies purchase, where those products come from, and how they move through the supply chain—from producers to City buyers. Under Business as Usual, vendors submit bids in response to NYC procurement requests, and agencies generally select the lowest-priced bid that meets their requirements. This scenario is built using multiple data sources, existing models, and input and validation from NYC and affected supply chain stakeholders. It serves as a baseline for comparing how alternative food policy actions may change outcomes.\n\n\nEnvironmental Sustainability: Organic Purchasing\n\nDescription\nBid allowance or requirement for organic certification by the producer, as defined by the U.S. Department of Agriculture’s National Organic Program.\n\n\nDefinition\nUnder this food policy action, organic has one definition:  Producer: The producer that grew or raised the community must have certified organic acres according to the 2022 U.S. Census of Agriculture.\n\n\nImplementation Scenario\nIncentive: NYC agencies may select an organic product bid based up to 10% above the lowest-priced non-organic bid. If organic products are priced more than 10% higher, agencies continue to select non-organic options.  Required: NYC agencies are required to purchase organic products, regardless of their price relative to non-organic options. Under this scenario, agencies select the lowest priced organic bid that meets all procurement requirements.\n\n\nImpacted Supply Chain Stakeholder(s)\nProducer, Aggregator, Primary Processor, Secondary Processor, Wholesaler/Distributor\n\n\nGood Food Purchasing Value\nEnvironmental Sustainability\n\n\n\nLocal Economies: M/WBE Purchasing\n\nDescription\nBid allowance or requirement for purchasing from certified minority or women owned businesses as defined by New York City or New York State.\n\n\nDefinition\nUnder this food policy action, M/WBE eligibility can be defined in three ways:  Producer: Only the producer that grew or raised the commodity is required to be M/WBE certified for the product to qualify.  Entire supply chain: All supply chain stakeholders that touch a commodity must be M/WBE certified by either NYC or NYS.  Vendor: Only the vendor that sells the product to NYC must be M/WBE certified.\n\n\nImplementation Scenario\nIncentive: NYC agencies may select M/WBE product bid priced up to 10% above the lowest-priced non-M/WBE bid. If M/WBE products are priced more than 10% higher, agencies continue to select non-M/WBE options. Required: NYC agencies are required to purchase M/WBE products, regardless of their price relative to non-M/WBE options. Agencies will select the lowest-price M/WBE bid that meets all procurement requirements.\n\n\nImpacted Supply Chain Stakeholder(s)\nProducer, aggregator, primary processor, secondary processor, wholesaler/distributor\n\n\nGood Food Purchasing Value\nLocal Economies\n\n\n\nLocal Economies: Local Purchasing\n\nDescription\nA bid allowance or requirement that products be grown, aggregated, processed, and/or distributed in New York State. Which stages of the supply chain must occur in New York State depends on the selected definition.\n\n\nDefinition\nUnder this food policy action, local can be defined in five ways: Producer: Only the producer that grew or raised the commodity must be located in the state of New York  Partial-supply chain: At least one of the producer, aggregator, primary or secondary processor must be located in the state of New York  Entire supply chain: Every supply chain stakeholder must be located in the state of New York  51% NY ingredients + processor in NY: This definition applies to processed products only. Under this definition, the processed product must include a processor from New York State and at least 51% of the raw ingredients must come from NYS producers.  51% NY ingredients + processor located anywhere This definition applies to processed products only. Under this definition, the processed product can be aggregated, processed, and distributed from anywhere, but at least 51% of the raw ingredients must come from NYS producers.\n\n\nImplementation Scenario\nIncentive: NYC agencies may select a local product bid priced up to 10% above the lowest-priced non-local bid. If local products are priced more than 10% higher, agencies continue to select non-local options.  Required: NYC agencies are required to purchase local products, regardless of their price relative to non-local options. Under this implementation scenario, agencies select the lowest-priced local bid that meets all procurement requirements.\n\n\nImpacted Supply Chain Stakeholder(s)\nProducer, Aggregator, Primary Processor, Secondary Processor, Wholesaler/Distributor\n\n\nGood Food Purchasing Value\nLocal Economies\n\n\n\nLocal Economies: Community Hiring from Small Producers\n\nDescription\nBid allowance or requirement for products grown or raised by small- or medium-sized farms. Farm size is measured by annual gross cash farm income (GCFI)—a measure of the farm’s revenue (before deducting expenses) that includes sales of crops and livestock, payments made under agricultural federal programs, and other farm-related cash income including fees from production contracts. The U.S. Department of Agriculture’s Economic Research Service Farm Typology defines small- and mid-sized farms as those with less that $1,000,000 in GCFI. Small- and medium-sized farms were selected as a proxy for “community hiring” as, on average, these operations have lower total household income.\n\n\nDefinition\nUnder this food policy action, community hiring from small business has one definition:  Producer: The producer that grew or raised the commodity must be small or medium-sized.\n\n\nImplementation Scenario\nIncentive: NYC agencies may select a bid from vendors that purchase from small- or medium sized farms priced up to 10% above the lowest-priced bid without small- or mid-sized farm grown or raised products. If bids with small- or medium-sized farm products are priced more than 10% higher, agencies continue to select bids without small- and medium sized farm options.  Required: NYC agencies must accept a bid that includes products from small- or medium-sized farms, even if lower-priced bids are available that do not include such products. Under this scenario, agencies select the lowest-priced bid that includes products from small- and medium-sized producers. This requirement does not mean the farm must deliver directly to the agency—only that the product sold to NYC must include items grown by small- or medium-sized farms.\n\n\nImpacted Supply Chain Stakeholder(s)\nProducer\n\n\nGood Food Purchasing Value\nLocal Economies\n\n\n\nLocal Economies: Investment in Middle Supply Chain Infrastructure\n\nDescription\nAn investment in a New York State aggregator, primary or secondary processor that expands the availability of New York-grown or -raised products and/or increases access to further processed items.\n\n\nImpacted Supply Chain Stakeholder(s)\nAggregator, Primary Processor, Secondary Processor\n\n\nGood Food Purchasing Value\nLocal Economies\n\n\n\nNutrition: Menu Changes\n\nDescription\nA change in the number of meals per week that are plant-based. This decision changes the relative share of animal-based proteins and plant-based proteins purchased by NYC agencies.\n\n\nDefinition\n1 additional meal weekly shift – assumption nonlocal to nonlocal  1 additional meal weekly shift – assumption nonlocal to local  1 additional meal weekly shift – assumptions local to local \n\n\nImpacted Supply Chain Stakeholder(s)\nProducer, Aggregator, Primary Processor, Secondary Processor, Wholesaler/Distributor\n\n\nGood Food Purchasing Value\nNutrition\n\n\n\n\nSupply Chain Stakeholders\nIn the model, each “agent” represents a type of food system participant—such as farms, food businesses, or City agencies—with distinct roles, constraints, decision rules, and characteristics. We refer to these as supply chain stakeholders, each of which has different types of characteristics. For example, a farm can have one or more of the following characteristics: small, certified organic, M/WBE operators.\n\nSupply Chain Stakeholder Types\n\nProducer\nFarms that grow beans using land, labor, and other farm inputs. This includes all on-farm production activities—from planting through harvest—but does not include activities such as cleaning or packaging.\n\n\nAggregator (Cleaner)\nThese businesses clean and sort dry beans. They may be owned by a single farm, a group of farms, or operate independently. They typically purchase beans in bulk (e.g., by the truckload) and resell them in smaller quantities or in containers for export markets. They operate either by purchasing beans and selling them after cleaning, or by providing cleaning and storage services for a fee.\n\n\nPrimary Processor\nThese businesses use cleaned beans as an input, such as canning operations, bean flour producers, and facilities that package beans into retail-sized bags.\n\n\nSecondary Processor\nThis is a secondary stage of processing beans into products. These businesses use beans from primary processors as inputs into their products. These include using cooked beans or bean flour to create a new product.\n\n\nWholesaler (Distributor)\nBusinesses that sell a product made by someone else. They can sell items from various stages in the supply chain.\n\n\nNYC Agency\nA New York City agency that purchases processed bean products from various suppliers.\n\n\nCommodity and Differentiated Markets\nCommodity markets (domestic or export) have effectively unlimited supply and demand and typically purchase at the lowest available price. They do not pay premiums for value characteristics (such as organic certification). Differentiated markets have more limited demand but often pay higher prices than commodity markets, reflecting preferences for specific product or business characteristics.\n\n\nOut-of-State-Supply\n\n\nBean Pathway\n\n\nContract Information Pathway\n\n\n\nSupply Chain Stakeholder Characteristics\n\nM/WBE (Minority- and Women-Owned Business Enterprises)\nBusinesses that are owned and operated by minorities and/or women. This includes (1) farms where one or more principal operators are minority- and/or women-identified, and (2) supply-chain businesses (e.g., processors, distributors) that are certified as M/WBEs by New York City or New York State.\n\n\nSmall\nFarm size is measured by annual gross cash farm income (GCFI)—a measure of the farm’s revenue (before deducting expenses) that includes sales of crops and livestock, payments made under agricultural federal programs, and other farm-related cash income including fees from production contracts. The U.S. Department of Agriculture’s Economic Research Service Farm Typology defines small- and mid-sized farms as those with less that $1,000,000 in GCFI. The number of small- and mid-sized farms is pulled from the U.S. Census of Agriculture and the farm locations are randomly distributed within a county.\n\n\nOrganic\nFarms that have certified organic acres according to the 2022 U.S. Census of Agriculture. The farm locations are randomly distributed within a county. ##### Local A farm or supply chain business is considered local if it is in New York State. However, the mix of supply chain stakeholders, or portion of the raw product that must be “local” differ based on the selected definition.\n\n\n\n\nModeled Impacts by Food Policy Action, Definition, and Implementation Scenario\n\nOverall Impact\nComprehensive view across selected impact categories for the NYC Food Policy Action, Definition, and Implementation Scenario relative to the Business as Usual baseline. The figure shows the status of food system impact across four broad dimensions: NYC agency impact (defined by the indicators “total cost to NYC”, “total number of contracted vendors”, and “total number of new vendors”), Environmental Impact . All impacts are presented relative to Business As Usual (a modeled depiction of what NYC is currently purchasing), which is represented by the black dotted line on the edge of the circle.\n\n\nNYC Agency Impact\nNYC has a primary responsibility to purchase and serve food to more than 1 million residents daily. The decisions it makes about what food to procure and how to procure it can impact how much the city (tax payers) spend on food. Here we use the following indicators to understand the impact to NYC:\n\nNumber of Contracts (absolute): Number of businesses that have contracts with NYC by supply chain characteristic: (1) M/WBE (2) local.\nNumber of Contracts (% change from Business as Usual): The percent change in the number of businesses that have contracts with NYC (compared to Business As Usual) by supply chain characteristic: (1) M/WBE (2) local.\nAmount of Beans Purchased (absolute): Total quantity (100 kg) of products purchased by supply chain characteristic: (1) M/WBE, (2) organic, (3) local, or (4) small. This is measured in 100 kg of beans and based on the food policy action, definition, and implementation scenario that is selected.\nAmount of Beans Purchased (% change from Business as Usual): The percent change in the amount of beans purchased (compared to Business As Usual) by supply chain characteristic: (1) M/WBE, (2) organic, (3) local, or (4) small. This is measured as percent change from Business as Usual and compared to the food policy action, definition, and implementation scenario that is selected.\nAmount Spent on Beans (total): This is the total amount ($) spent on beans (including dried, canned, and processed) by NYC agencies, by supply chain characteristic: (1) M/WBE, (2) organic, (3) local, or (4) small. This is measured in dollars spent on beans by all NYC agencies and based on the food policy action, definition, and implementation scenario that is selected.\nAmount Spent on Beans (unit): This is the average amount ($) spent per pound of beans by NYC agencies, by supply chain characteristic: (1) M/WBE, (2) organic, (3) local, or (4) small, and based on its level of processing (e.g., dried bean, canned bean, processed bean). Units are displayed as price per pound (lb).\n\n\n\nEnvironmental Impact\nNYC has a number of ways that it tracks progress towards achieving its environmental sustainability goals. Those include but are not limited to: water quality impacts, global warming, and natural resource use. - Global warming (kg CO2 eq) / GHG emissions - Energy use/kg of food purchased (MJ) - Water quality (kg P eq) - Air quality - Land use and quality (m2 / year) - Materials used/kg of product - Erosion potential - Biodiversity impact - Certified organic acres (New York State): This indicator assesses the amount (acres) under certified organic production in New York State, wherein Business as Usual is compared to the selected Food Policy Action, Definition, and Implementation Scenario.\n\n\nProducer Impact\nThere are several measures to track progress towards NYC’s local economy and valued workforce goals, many of which focus on the characteristics of the farms that grow or raise the products purchased by City agencies. This analysis examines how those policies affect New York State producers by tracking: (1) the number of producers with sales to NYC, (2) average yearly producer revenue from NYC agency contracts, (3) the share of producers’ sales going to NYC, and (4) changes in profitability for producers selling into the NYC market.\n\nProducers with NYC Agency Contracts: The number of producers with sales to NYC agencies, reported by supply chain characteristic: (1) M/WBE, (2) organic, (3) local, or (4) small. This indicator reflects the total count of participating producers, for the selected Food Policy Action, Definition, and Implementation Scenario compared to Business as Usual.\nAverage Yearly Producer Revenue from NYC Agency Contracts (average yearly revenue): This indicator estimates the average revenue that New York State producers receive from products ultimately purchased by NYC agencies. It is calculated by dividing the total dollar value of NYC purchases (by supply chain characteristic) by the number of New York State producers supplying those products, including sales that flow through supply chain intermediaries. The result represents an average dollar value per producer, reported by producer characteristic, and by the selected Food Policy Action, Definition, and Implementation Scenario compared to Business as Usual.\nAverage Yearly Producer Revenue from NYC Agency Contracts (% change from Business as Usual): This indicator estimates the average revenue that New York State producers receive from products ultimately purchased by NYC agencies. It is calculated by dividing the total dollar value of NYC agency purchases (by supply chain characteristic) by the number of New York State producers supplying those products, including sales that flow through intermediaries in the supply chain. Results are reported as the percent change from Business as Usual for the selected Food Policy Action, Definition, and Implementation Scenario.\nProducer reliance on NYC markets: The share of a producer’s gross cash farm income that comes from products ultimately purchased by NYC agencies. This indicator represents the NYC-purchased portion of farm sales, averaged across all farms involved in sales to NYC. Results are reported for Business as Usual, as well as the selected Food Policy Action, Definition, and Implementation Scenario.\nProducer profitability: Profitability of farms with positive sales to NYC agencies by supply chain characteristic: (1) M/WBE, (2) organic, (3) local, or (4) small.\n\n\n\nEconomic Impact\n\nNYS business relationships with NYC agencies (absolute): This indicator reflects the total number of supply chain stakeholders that have sale relationships with NYC agencies.\nNYS business relationships with NYC agencies (% change from Business as Usual): This indicator reflects the change in the total number of supply chain stakeholders that have sale relationships with NYC agencies for the selected Food Policy Action, Definition, and Implementation Scenario compared to Business as Usual.\nFood Dollar: Marketing bill: The food dollar, marketing bill, analyzes how an average $1 of purchases by NYC is distributed among raw food production (producer) and the portion that goes to food supply chain stakeholders. This is an indicator used by the U.S. Department of Agriculture’s Economic Research Service to describe different aspects of the food supply chain. Here we are interested in the effects of Food Policy Actions, Definition, and Implementation Scenario compared to Business as Usual.\nEconomic impact to New York State, regional multiplier effect\nJob creation, particularly in the food processing/manufacturing/distribution sector",
    "crumbs": [
      "Appendices",
      "Glossary"
    ]
  }
]